{"ast":null,"code":"import * as i0 from '@angular/core';\nimport { Injectable, Directive, Optional, Self, SkipSelf, inject, Input, ChangeDetectorRef, INJECTOR, signal, TemplateRef, Component, ChangeDetectionStrategy, computed, EventEmitter, ElementRef, ContentChild, Output, ViewContainerRef } from '@angular/core';\nimport { takeUntilDestroyed } from '@angular/core/rxjs-interop';\nimport { WA_WINDOW } from '@ng-web-apis/common';\nimport * as i1 from '@taiga-ui/cdk/directives/active-zone';\nimport { TuiActiveZone } from '@taiga-ui/cdk/directives/active-zone';\nimport { tuiInjectElement, tuiGetActualTarget, tuiPointToClientRect, tuiIsElement, tuiIsHTMLElement, tuiIsElementEditable, tuiIsTextNode, tuiIsTextfield } from '@taiga-ui/cdk/utils/dom';\nimport { tuiClamp } from '@taiga-ui/cdk/utils/math';\nimport { tuiCreateTokenFromFactory, tuiCreateToken, tuiProvide, tuiPure, tuiPx, tuiProvideOptions, tuiIsString, tuiDirectiveBinding } from '@taiga-ui/cdk/utils/miscellaneous';\nimport { tuiDropdownAnimation } from '@taiga-ui/core/animations';\nimport { TuiDriverDirective, TuiPositionAccessor, tuiFallbackAccessor, TuiRectAccessor, tuiAsRectAccessor, tuiAsVehicle, tuiPositionAccessorFor, tuiRectAccessorFor, tuiAsDriver, TuiDriver, tuiAsPositionAccessor } from '@taiga-ui/core/classes';\nimport { TuiScrollbar } from '@taiga-ui/core/components/scrollbar';\nimport { TuiVisualViewportService, TuiPositionService } from '@taiga-ui/core/services';\nimport { TUI_VIEWPORT, TUI_ANIMATIONS_SPEED, TUI_SELECTION_STREAM } from '@taiga-ui/core/tokens';\nimport { tuiOverrideOptions, tuiCheckFixedPosition, tuiToAnimationOptions, tuiGetWordRange } from '@taiga-ui/core/utils';\nimport { PolymorpheusComponent, PolymorpheusTemplate, PolymorpheusOutlet } from '@taiga-ui/polymorpheus';\nimport { Subject, throttleTime, takeWhile, map, merge, filter, fromEvent, distinctUntilChanged, switchMap, of, delay, tap, share, BehaviorSubject, combineLatest } from 'rxjs';\nimport { __decorate } from 'tslib';\nimport { tuiZonefreeScheduler, tuiWatch, tuiTypedFromEvent, tuiZoneOptimized } from '@taiga-ui/cdk/observables';\nimport { TuiPortalService, TuiPortals, tuiAsPortal } from '@taiga-ui/cdk/classes';\nimport { EMPTY_CLIENT_RECT, TUI_TRUE_HANDLER, CHAR_ZERO_WIDTH_SPACE, CHAR_NO_BREAK_SPACE } from '@taiga-ui/cdk/constants';\nimport { TUI_IS_TOUCH, TUI_RANGE } from '@taiga-ui/cdk/tokens';\nimport { shouldCall } from '@taiga-ui/event-plugins';\nimport { DOCUMENT } from '@angular/common';\nimport * as i1$1 from '@taiga-ui/cdk/directives/obscured';\nimport { TuiObscured } from '@taiga-ui/cdk/directives/obscured';\nimport { tuiIsNativeKeyboardFocusable, tuiGetClosestFocusable, tuiIsNativeFocusedIn, tuiGetNativeFocused } from '@taiga-ui/cdk/utils/focus';\nimport { tuiIsEditingKey, tuiOverrideOptions as tuiOverrideOptions$1 } from '@taiga-ui/core/utils/miscellaneous';\nconst _c0 = a0 => ({\n  $implicit: a0\n});\nfunction TuiDropdownComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 2);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const text_r1 = ctx.polymorpheusOutlet;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", text_r1, \" \");\n  }\n}\nconst _c1 = [\"tuiDropdownHost\"];\nconst _c2 = [\"*\"];\nclass TuiDropdownDriver extends Subject {\n  constructor() {\n    super(...arguments);\n    this.type = 'dropdown';\n  }\n  static {\n    this.ɵfac = /* @__PURE__ */(() => {\n      let ɵTuiDropdownDriver_BaseFactory;\n      return function TuiDropdownDriver_Factory(__ngFactoryType__) {\n        return (ɵTuiDropdownDriver_BaseFactory || (ɵTuiDropdownDriver_BaseFactory = i0.ɵɵgetInheritedFactory(TuiDropdownDriver)))(__ngFactoryType__ || TuiDropdownDriver);\n      };\n    })();\n  }\n  static {\n    this.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n      token: TuiDropdownDriver,\n      factory: TuiDropdownDriver.ɵfac\n    });\n  }\n}\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(TuiDropdownDriver, [{\n    type: Injectable\n  }], null, null);\n})();\nclass TuiDropdownDriverDirective extends TuiDriverDirective {\n  constructor() {\n    super(...arguments);\n    this.type = 'dropdown';\n  }\n  static {\n    this.ɵfac = /* @__PURE__ */(() => {\n      let ɵTuiDropdownDriverDirective_BaseFactory;\n      return function TuiDropdownDriverDirective_Factory(__ngFactoryType__) {\n        return (ɵTuiDropdownDriverDirective_BaseFactory || (ɵTuiDropdownDriverDirective_BaseFactory = i0.ɵɵgetInheritedFactory(TuiDropdownDriverDirective)))(__ngFactoryType__ || TuiDropdownDriverDirective);\n      };\n    })();\n  }\n  static {\n    this.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n      type: TuiDropdownDriverDirective,\n      selectors: [[\"\", \"tuiDropdownDriver\", \"\"]],\n      standalone: true,\n      features: [i0.ɵɵInheritDefinitionFeature]\n    });\n  }\n}\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(TuiDropdownDriverDirective, [{\n    type: Directive,\n    args: [{\n      standalone: true,\n      selector: '[tuiDropdownDriver]'\n    }]\n  }], null, null);\n})();\n\n/**\n * A component to display a dropdown\n */\nconst TUI_DROPDOWN_COMPONENT = tuiCreateTokenFromFactory(() => TuiDropdownComponent);\nconst TUI_DROPDOWN_CONTEXT = tuiCreateToken();\nclass TuiDropdownService extends TuiPortalService {\n  static {\n    this.ɵfac = /* @__PURE__ */(() => {\n      let ɵTuiDropdownService_BaseFactory;\n      return function TuiDropdownService_Factory(__ngFactoryType__) {\n        return (ɵTuiDropdownService_BaseFactory || (ɵTuiDropdownService_BaseFactory = i0.ɵɵgetInheritedFactory(TuiDropdownService)))(__ngFactoryType__ || TuiDropdownService);\n      };\n    })();\n  }\n  static {\n    this.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n      token: TuiDropdownService,\n      factory: TuiDropdownService.ɵfac,\n      providedIn: 'root'\n    });\n  }\n}\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(TuiDropdownService, [{\n    type: Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }], null, null);\n})();\n\n/** Default values for dropdown options */\nconst TUI_DROPDOWN_DEFAULT_OPTIONS = {\n  align: 'left',\n  direction: null,\n  limitWidth: 'auto',\n  maxHeight: 400,\n  minHeight: 80,\n  offset: 4,\n  appearance: ''\n};\n/**\n * Default parameters for dropdown directive\n */\nconst TUI_DROPDOWN_OPTIONS = tuiCreateToken(TUI_DROPDOWN_DEFAULT_OPTIONS);\nconst tuiDropdownOptionsProvider = override => ({\n  provide: TUI_DROPDOWN_OPTIONS,\n  deps: [[new Optional(), new Self(), TuiDropdownOptionsDirective], [new Optional(), new SkipSelf(), TUI_DROPDOWN_OPTIONS]],\n  useFactory: tuiOverrideOptions(override, TUI_DROPDOWN_DEFAULT_OPTIONS)\n});\nclass TuiDropdownOptionsDirective {\n  constructor() {\n    this.options = inject(TUI_DROPDOWN_OPTIONS, {\n      skipSelf: true\n    });\n    this.align = this.options.align;\n    this.appearance = this.options.appearance;\n    this.direction = this.options.direction;\n    this.limitWidth = this.options.limitWidth;\n    this.minHeight = this.options.minHeight;\n    this.maxHeight = this.options.maxHeight;\n    this.offset = this.options.offset;\n  }\n  static {\n    this.ɵfac = function TuiDropdownOptionsDirective_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || TuiDropdownOptionsDirective)();\n    };\n  }\n  static {\n    this.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n      type: TuiDropdownOptionsDirective,\n      selectors: [[\"\", \"tuiDropdownAlign\", \"\"], [\"\", \"tuiDropdownAppearance\", \"\"], [\"\", \"tuiDropdownDirection\", \"\"], [\"\", \"tuiDropdownLimitWidth\", \"\"], [\"\", \"tuiDropdownMinHeight\", \"\"], [\"\", \"tuiDropdownMaxHeight\", \"\"], [\"\", \"tuiDropdownOffset\", \"\"]],\n      inputs: {\n        align: [0, \"tuiDropdownAlign\", \"align\"],\n        appearance: [0, \"tuiDropdownAppearance\", \"appearance\"],\n        direction: [0, \"tuiDropdownDirection\", \"direction\"],\n        limitWidth: [0, \"tuiDropdownLimitWidth\", \"limitWidth\"],\n        minHeight: [0, \"tuiDropdownMinHeight\", \"minHeight\"],\n        maxHeight: [0, \"tuiDropdownMaxHeight\", \"maxHeight\"],\n        offset: [0, \"tuiDropdownOffset\", \"offset\"]\n      },\n      standalone: true,\n      features: [i0.ɵɵProvidersFeature([tuiProvide(TUI_DROPDOWN_OPTIONS, TuiDropdownOptionsDirective)])]\n    });\n  }\n}\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(TuiDropdownOptionsDirective, [{\n    type: Directive,\n    args: [{\n      standalone: true,\n      selector: '[tuiDropdownAlign], [tuiDropdownAppearance], [tuiDropdownDirection], [tuiDropdownLimitWidth], [tuiDropdownMinHeight], [tuiDropdownMaxHeight], [tuiDropdownOffset]',\n      providers: [tuiProvide(TUI_DROPDOWN_OPTIONS, TuiDropdownOptionsDirective)]\n    }]\n  }], null, {\n    align: [{\n      type: Input,\n      args: ['tuiDropdownAlign']\n    }],\n    appearance: [{\n      type: Input,\n      args: ['tuiDropdownAppearance']\n    }],\n    direction: [{\n      type: Input,\n      args: ['tuiDropdownDirection']\n    }],\n    limitWidth: [{\n      type: Input,\n      args: ['tuiDropdownLimitWidth']\n    }],\n    minHeight: [{\n      type: Input,\n      args: ['tuiDropdownMinHeight']\n    }],\n    maxHeight: [{\n      type: Input,\n      args: ['tuiDropdownMaxHeight']\n    }],\n    offset: [{\n      type: Input,\n      args: ['tuiDropdownOffset']\n    }]\n  });\n})();\nclass TuiDropdownPosition extends TuiPositionAccessor {\n  constructor() {\n    super(...arguments);\n    this.options = inject(TUI_DROPDOWN_OPTIONS);\n    this.viewport = inject(TUI_VIEWPORT);\n    this.type = 'dropdown';\n    this.accessor = tuiFallbackAccessor('dropdown')(inject(TuiRectAccessor), inject(TuiDropdownDirective, {\n      optional: true\n    }));\n  }\n  getPosition({\n    width,\n    height\n  }) {\n    if (!width && !height) {\n      this.previous = undefined;\n    }\n    const hostRect = this.accessor?.getClientRect() ?? EMPTY_CLIENT_RECT;\n    const viewportRect = this.viewport.getClientRect();\n    const {\n      minHeight,\n      align,\n      direction,\n      offset,\n      limitWidth\n    } = this.options;\n    const viewport = {\n      top: viewportRect.top - offset,\n      bottom: viewportRect.bottom + offset,\n      right: viewportRect.right - offset,\n      left: viewportRect.left + offset\n    };\n    const previous = this.previous || direction || 'bottom';\n    const available = {\n      top: hostRect.top - 2 * offset - viewport.top,\n      bottom: viewport.bottom - hostRect.bottom - 2 * offset\n    };\n    const rectWidth = limitWidth === 'fixed' ? hostRect.width : width;\n    const right = Math.max(hostRect.right - rectWidth, offset);\n    const left = hostRect.left + width < viewport.right ? hostRect.left : right;\n    const position = {\n      top: hostRect.top - offset - height,\n      bottom: hostRect.bottom + offset,\n      right: Math.max(viewport.left, right),\n      center: hostRect.left + hostRect.width / 2 + width / 2 < viewport.right ? hostRect.left + hostRect.width / 2 - width / 2 : right,\n      left: Math.max(viewport.left, left)\n    };\n    const better = available.top > available.bottom ? 'top' : 'bottom';\n    if (available[previous] > minHeight && direction || available[previous] > height) {\n      return [position[previous], position[align]];\n    }\n    this.previous = better;\n    return [position[better], position[align]];\n  }\n  static {\n    this.ɵfac = /* @__PURE__ */(() => {\n      let ɵTuiDropdownPosition_BaseFactory;\n      return function TuiDropdownPosition_Factory(__ngFactoryType__) {\n        return (ɵTuiDropdownPosition_BaseFactory || (ɵTuiDropdownPosition_BaseFactory = i0.ɵɵgetInheritedFactory(TuiDropdownPosition)))(__ngFactoryType__ || TuiDropdownPosition);\n      };\n    })();\n  }\n  static {\n    this.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n      type: TuiDropdownPosition,\n      selectors: [[\"\", \"tuiDropdownPosition\", \"\"]],\n      standalone: true,\n      features: [i0.ɵɵInheritDefinitionFeature]\n    });\n  }\n}\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(TuiDropdownPosition, [{\n    type: Directive,\n    args: [{\n      standalone: true,\n      selector: '[tuiDropdownPosition]'\n    }]\n  }], null, null);\n})();\nclass TuiDropdownDirective {\n  constructor() {\n    this.refresh$ = new Subject();\n    this.service = inject(TuiDropdownService);\n    this.cdr = inject(ChangeDetectorRef);\n    this.sub = this.refresh$.pipe(throttleTime(0, tuiZonefreeScheduler()), takeUntilDestroyed()).subscribe(() => {\n      this.ref()?.changeDetectorRef.detectChanges();\n      this.ref()?.changeDetectorRef.markForCheck();\n    });\n    this.el = tuiInjectElement();\n    this.type = 'dropdown';\n    this.component = new PolymorpheusComponent(inject(TUI_DROPDOWN_COMPONENT), inject(INJECTOR));\n    this.ref = signal(null);\n  }\n  set tuiDropdown(content) {\n    this.content = content instanceof TemplateRef ? new PolymorpheusTemplate(content, this.cdr) : content;\n  }\n  get position() {\n    return tuiCheckFixedPosition(this.el) ? 'fixed' : 'absolute';\n  }\n  ngAfterViewChecked() {\n    this.refresh$.next();\n  }\n  ngOnChanges() {\n    if (!this.content) {\n      this.toggle(false);\n    }\n  }\n  ngOnDestroy() {\n    this.toggle(false);\n  }\n  getClientRect() {\n    return this.el.getBoundingClientRect();\n  }\n  toggle(show) {\n    const ref = this.ref();\n    if (show && this.content && !ref) {\n      this.ref.set(this.service.add(this.component));\n    } else if (!show && ref) {\n      this.ref.set(null);\n      this.service.remove(ref);\n    }\n  }\n  static {\n    this.ɵfac = function TuiDropdownDirective_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || TuiDropdownDirective)();\n    };\n  }\n  static {\n    this.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n      type: TuiDropdownDirective,\n      selectors: [[\"\", \"tuiDropdown\", \"\", 5, \"ng-container\", 5, \"ng-template\"]],\n      inputs: {\n        tuiDropdown: \"tuiDropdown\"\n      },\n      exportAs: [\"tuiDropdown\"],\n      standalone: true,\n      features: [i0.ɵɵProvidersFeature([tuiAsRectAccessor(TuiDropdownDirective), tuiAsVehicle(TuiDropdownDirective)]), i0.ɵɵHostDirectivesFeature([TuiDropdownDriverDirective, TuiDropdownPosition]), i0.ɵɵNgOnChangesFeature]\n    });\n  }\n}\n__decorate([tuiPure], TuiDropdownDirective.prototype, \"position\", null);\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(TuiDropdownDirective, [{\n    type: Directive,\n    args: [{\n      standalone: true,\n      selector: '[tuiDropdown]:not(ng-container):not(ng-template)',\n      providers: [tuiAsRectAccessor(TuiDropdownDirective), tuiAsVehicle(TuiDropdownDirective)],\n      exportAs: 'tuiDropdown',\n      hostDirectives: [TuiDropdownDriverDirective, TuiDropdownPosition]\n    }]\n  }], null, {\n    tuiDropdown: [{\n      type: Input\n    }],\n    position: []\n  });\n})();\n\n/**\n * @description:\n * This component is used to show template in a portal\n * using default style of white rounded box with a shadow\n */\nclass TuiDropdownComponent {\n  constructor() {\n    this.el = tuiInjectElement();\n    this.accessor = inject(TuiRectAccessor);\n    this.win = inject(WA_WINDOW);\n    this.vvs = inject(TuiVisualViewportService);\n    this.animation = tuiToAnimationOptions(inject(TUI_ANIMATIONS_SPEED));\n    this.options = inject(TUI_DROPDOWN_OPTIONS);\n    this.directive = inject(TuiDropdownDirective);\n    this.context = inject(TUI_DROPDOWN_CONTEXT, {\n      optional: true\n    });\n    this.theme = this.directive.el.closest('[tuiTheme]')?.getAttribute('tuiTheme');\n    this.sub = inject(TuiPositionService).pipe(takeWhile(() => this.directive.el.isConnected && !!this.directive.el.offsetParent), map(v => this.directive.position === 'fixed' ? this.vvs.correct(v) : v), map(([top, left]) => this.getStyles(top, left)), takeUntilDestroyed()).subscribe({\n      next: styles => Object.assign(this.el.style, styles),\n      complete: () => this.close?.()\n    });\n    this.close = () => this.directive.toggle(false);\n  }\n  getStyles(top, left) {\n    const {\n      right\n    } = this.el.getBoundingClientRect();\n    const {\n      maxHeight,\n      minHeight,\n      offset,\n      limitWidth\n    } = this.options;\n    const {\n      innerHeight\n    } = this.win;\n    const clientRect = this.el.offsetParent?.getBoundingClientRect();\n    const {\n      position\n    } = this.directive;\n    const rect = this.accessor.getClientRect();\n    const offsetX = position === 'fixed' ? 0 : -(clientRect?.left || 0);\n    const offsetY = position === 'fixed' ? 0 : -(clientRect?.top || 0);\n    top += offsetY;\n    left += offsetX;\n    const sided = right <= rect.left || left >= rect.right;\n    const isIntersecting = left < rect.right && right > rect.left && top < offsetY + 2 * offset;\n    const available = isIntersecting ? rect.top - 2 * offset : offsetY + innerHeight - top - offset;\n    return {\n      position,\n      top: tuiPx(Math.round(Math.max(top, offsetY + offset))),\n      left: tuiPx(Math.round(left)),\n      maxHeight: sided ? tuiPx(maxHeight) : tuiPx(Math.round(tuiClamp(available, minHeight, maxHeight))),\n      width: limitWidth === 'fixed' ? tuiPx(Math.round(rect.width)) : '',\n      minWidth: limitWidth === 'min' ? tuiPx(Math.round(rect.width)) : ''\n    };\n  }\n  static {\n    this.ɵfac = function TuiDropdownComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || TuiDropdownComponent)();\n    };\n  }\n  static {\n    this.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n      type: TuiDropdownComponent,\n      selectors: [[\"tui-dropdown\"]],\n      hostVars: 3,\n      hostBindings: function TuiDropdownComponent_HostBindings(rf, ctx) {\n        if (rf & 2) {\n          i0.ɵɵsyntheticHostProperty(\"@tuiDropdownAnimation\", ctx.animation);\n          i0.ɵɵattribute(\"data-appearance\", ctx.options.appearance)(\"tuiTheme\", ctx.theme);\n        }\n      },\n      standalone: true,\n      features: [i0.ɵɵProvidersFeature([TuiPositionService, tuiPositionAccessorFor('dropdown', TuiDropdownPosition), tuiRectAccessorFor('dropdown', TuiDropdownDirective)]), i0.ɵɵHostDirectivesFeature([i1.TuiActiveZone]), i0.ɵɵStandaloneFeature],\n      decls: 2,\n      vars: 4,\n      consts: [[1, \"t-scroll\"], [\"class\", \"t-primitive\", 4, \"polymorpheusOutlet\", \"polymorpheusOutletContext\"], [1, \"t-primitive\"]],\n      template: function TuiDropdownComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"tui-scrollbar\", 0);\n          i0.ɵɵtemplate(1, TuiDropdownComponent_div_1_Template, 2, 1, \"div\", 1);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"polymorpheusOutlet\", ctx.directive.content)(\"polymorpheusOutletContext\", i0.ɵɵpureFunction1(2, _c0, ctx.close));\n        }\n      },\n      dependencies: [PolymorpheusOutlet, TuiScrollbar],\n      styles: [\"[_nghost-%COMP%]{position:absolute;display:flex;box-shadow:var(--tui-shadow-medium);color:var(--tui-text-primary);background:var(--tui-background-elevation-3);border-radius:var(--tui-radius-m);overflow:hidden;border:1px solid var(--tui-border-normal);box-sizing:border-box;max-inline-size:calc(100% - 8px);isolation:isolate;pointer-events:auto}.ng-animating[_nghost-%COMP%]{pointer-events:none}[_nghost-%COMP%]:not([style*=top]){visibility:hidden}.t-scroll[_ngcontent-%COMP%]{flex-grow:1;max-inline-size:100%;overscroll-behavior:none}.t-primitive[_ngcontent-%COMP%]{padding:1rem}\"],\n      data: {\n        animation: [tuiDropdownAnimation]\n      }\n    });\n  }\n}\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(TuiDropdownComponent, [{\n    type: Component,\n    args: [{\n      standalone: true,\n      selector: 'tui-dropdown',\n      imports: [PolymorpheusOutlet, PolymorpheusTemplate, TuiScrollbar],\n      changeDetection: ChangeDetectionStrategy.Default,\n      providers: [TuiPositionService, tuiPositionAccessorFor('dropdown', TuiDropdownPosition), tuiRectAccessorFor('dropdown', TuiDropdownDirective)],\n      animations: [tuiDropdownAnimation],\n      hostDirectives: [TuiActiveZone],\n      host: {\n        '[@tuiDropdownAnimation]': 'animation',\n        '[attr.data-appearance]': 'options.appearance',\n        '[attr.tuiTheme]': 'theme'\n      },\n      template: \"<tui-scrollbar class=\\\"t-scroll\\\">\\n    <div\\n        *polymorpheusOutlet=\\\"directive.content as text; context: {$implicit: close}\\\"\\n        class=\\\"t-primitive\\\"\\n    >\\n        {{ text }}\\n    </div>\\n</tui-scrollbar>\\n\",\n      styles: [\":host{position:absolute;display:flex;box-shadow:var(--tui-shadow-medium);color:var(--tui-text-primary);background:var(--tui-background-elevation-3);border-radius:var(--tui-radius-m);overflow:hidden;border:1px solid var(--tui-border-normal);box-sizing:border-box;max-inline-size:calc(100% - 8px);isolation:isolate;pointer-events:auto}:host.ng-animating{pointer-events:none}:host:not([style*=top]){visibility:hidden}.t-scroll{flex-grow:1;max-inline-size:100%;overscroll-behavior:none}.t-primitive{padding:1rem}\\n\"]\n    }]\n  }], null, null);\n})();\nfunction activeZoneFilter(event) {\n  return !event || !this.activeZone.contains(tuiGetActualTarget(event));\n}\nclass TuiDropdownContext extends TuiRectAccessor {\n  constructor() {\n    super(...arguments);\n    this.isTouch = inject(TUI_IS_TOUCH);\n    this.driver = inject(TuiDropdownDriver);\n    this.currentRect = EMPTY_CLIENT_RECT;\n    this.userSelect = computed(() => this.isTouch() ? 'none' : null);\n    this.activeZone = inject(TuiActiveZone);\n    this.type = 'dropdown';\n  }\n  getClientRect() {\n    return this.currentRect;\n  }\n  closeDropdown(_event) {\n    this.driver.next(false);\n    this.currentRect = EMPTY_CLIENT_RECT;\n  }\n  onContextMenu(x, y) {\n    this.currentRect = tuiPointToClientRect(x, y);\n    this.driver.next(true);\n  }\n  static {\n    this.ɵfac = /* @__PURE__ */(() => {\n      let ɵTuiDropdownContext_BaseFactory;\n      return function TuiDropdownContext_Factory(__ngFactoryType__) {\n        return (ɵTuiDropdownContext_BaseFactory || (ɵTuiDropdownContext_BaseFactory = i0.ɵɵgetInheritedFactory(TuiDropdownContext)))(__ngFactoryType__ || TuiDropdownContext);\n      };\n    })();\n  }\n  static {\n    this.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n      type: TuiDropdownContext,\n      selectors: [[\"\", \"tuiDropdownContext\", \"\"]],\n      hostVars: 6,\n      hostBindings: function TuiDropdownContext_HostBindings(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵlistener(\"pointerdown.silent\", function TuiDropdownContext_pointerdown_silent_HostBindingHandler($event) {\n            return ctx.closeDropdown($event);\n          }, false, i0.ɵɵresolveDocument)(\"contextmenu.capture.silent\", function TuiDropdownContext_contextmenu_capture_silent_HostBindingHandler($event) {\n            return ctx.closeDropdown($event);\n          }, false, i0.ɵɵresolveDocument)(\"keydown.esc\", function TuiDropdownContext_keydown_esc_HostBindingHandler() {\n            return ctx.closeDropdown();\n          }, false, i0.ɵɵresolveDocument)(\"longtap\", function TuiDropdownContext_longtap_HostBindingHandler($event) {\n            return ctx.onContextMenu($event.detail.clientX, $event.detail.clientY);\n          });\n        }\n        if (rf & 2) {\n          i0.ɵɵstyleProp(\"user-select\", ctx.userSelect())(\"-webkit-user-select\", ctx.userSelect())(\"-webkit-touch-callout\", ctx.userSelect());\n        }\n      },\n      standalone: true,\n      features: [i0.ɵɵProvidersFeature([TuiActiveZone, TuiDropdownDriver, tuiAsDriver(TuiDropdownDriver), tuiAsRectAccessor(TuiDropdownContext)]), i0.ɵɵInheritDefinitionFeature]\n    });\n  }\n}\n__decorate([shouldCall(activeZoneFilter)], TuiDropdownContext.prototype, \"closeDropdown\", null);\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(TuiDropdownContext, [{\n    type: Directive,\n    args: [{\n      standalone: true,\n      selector: '[tuiDropdownContext]',\n      providers: [TuiActiveZone, TuiDropdownDriver, tuiAsDriver(TuiDropdownDriver), tuiAsRectAccessor(TuiDropdownContext)],\n      host: {\n        '[style.user-select]': 'userSelect()',\n        '[style.-webkit-user-select]': 'userSelect()',\n        '[style.-webkit-touch-callout]': 'userSelect()',\n        '(document:pointerdown.silent)': 'closeDropdown($event)',\n        '(document:contextmenu.capture.silent)': 'closeDropdown($event)',\n        '(document:keydown.esc)': 'closeDropdown()',\n        '(longtap)': 'onContextMenu($event.detail.clientX, $event.detail.clientY)'\n      }\n    }]\n  }], null, {\n    closeDropdown: []\n  });\n})();\n\n/** Default values for hint options */\nconst TUI_DROPDOWN_HOVER_DEFAULT_OPTIONS = {\n  showDelay: 200,\n  hideDelay: 500\n};\n/**\n * Default parameters for dropdown hover directive\n */\nconst TUI_DROPDOWN_HOVER_OPTIONS = tuiCreateToken(TUI_DROPDOWN_HOVER_DEFAULT_OPTIONS);\nfunction tuiDropdownHoverOptionsProvider(options) {\n  return tuiProvideOptions(TUI_DROPDOWN_HOVER_OPTIONS, options, TUI_DROPDOWN_HOVER_DEFAULT_OPTIONS);\n}\nfunction shouldClose(event) {\n  return 'key' in event && event.key.toLowerCase() === 'escape' && this.tuiDropdownEnabled && !!this.tuiDropdownOpen && !this['dropdown']()?.nextElementSibling;\n}\nclass TuiDropdownOpen {\n  constructor() {\n    this.directive = inject(TuiDropdownDirective);\n    this.el = tuiInjectElement();\n    this.obscured = inject(TuiObscured);\n    this.dropdown = computed(() => this.directive.ref()?.location.nativeElement);\n    this.sub = merge(this.obscured.tuiObscured.pipe(filter(Boolean)), inject(TuiActiveZone).tuiActiveZoneChange.pipe(filter(a => !a)), fromEvent(this.el, 'focusin').pipe(map(tuiGetActualTarget), filter(target => !this.host.contains(target) || !this.directive.ref()))).pipe(tuiWatch(), takeUntilDestroyed()).subscribe(() => this.toggle(false));\n    this.tuiDropdownEnabled = true;\n    this.tuiDropdownOpen = false;\n    this.tuiDropdownOpenChange = new EventEmitter();\n    // TODO: make it private when all legacy controls will be deleted from @taiga-ui/legacy (5.0)\n    this.driver = inject(TuiDropdownDriver);\n  }\n  ngOnChanges() {\n    this.update(!!this.tuiDropdownOpen && this.tuiDropdownEnabled);\n  }\n  toggle(open) {\n    if (this.focused && !open) {\n      this.host.focus({\n        preventScroll: true\n      });\n    }\n    this.update(open);\n  }\n  onEsc(event) {\n    event.preventDefault();\n    this.toggle(false);\n  }\n  onClick(target) {\n    if (!this.editable && this.host.contains(target)) {\n      this.update(!this.tuiDropdownOpen);\n    }\n  }\n  onArrow(event, up) {\n    if (!tuiIsElement(event.target) || !this.host.contains(event.target) || !this.tuiDropdownEnabled) {\n      return;\n    }\n    event.preventDefault();\n    this.focusDropdown(up);\n  }\n  onKeydown({\n    key,\n    target,\n    defaultPrevented\n  }) {\n    if (defaultPrevented || !tuiIsEditingKey(key) || !this.editable || !this.focused || !this.directive.content || !tuiIsHTMLElement(target) || tuiIsElementEditable(target) && target !== this.host) {\n      return;\n    }\n    this.update(true);\n    this.host.focus({\n      preventScroll: true\n    });\n  }\n  get host() {\n    const initial = this.dropdownHost?.nativeElement || this.el;\n    const focusable = tuiIsNativeKeyboardFocusable(initial) ? initial : tuiGetClosestFocusable({\n      initial,\n      root: this.el\n    });\n    return this.dropdownHost?.nativeElement || focusable || this.el;\n  }\n  get editable() {\n    return tuiIsElementEditable(this.host);\n  }\n  get focused() {\n    return tuiIsNativeFocusedIn(this.host) || tuiIsNativeFocusedIn(this.dropdown());\n  }\n  update(open) {\n    if (open && !this.tuiDropdownEnabled) {\n      return;\n    }\n    this.tuiDropdownOpen = open;\n    this.tuiDropdownOpenChange.emit(open);\n    this.drive();\n  }\n  drive(open = !!this.tuiDropdownOpen && this.tuiDropdownEnabled) {\n    this.obscured.tuiObscuredEnabled = open;\n    this.driver.next(open);\n  }\n  focusDropdown(previous) {\n    const root = this.dropdown();\n    if (!root) {\n      this.update(true);\n      return;\n    }\n    const doc = this.el.ownerDocument;\n    const child = root.appendChild(doc.createElement('div'));\n    const initial = previous ? child : root;\n    const focusable = tuiGetClosestFocusable({\n      initial,\n      previous,\n      root\n    });\n    child.remove();\n    focusable?.focus();\n  }\n  static {\n    this.ɵfac = function TuiDropdownOpen_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || TuiDropdownOpen)();\n    };\n  }\n  static {\n    this.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n      type: TuiDropdownOpen,\n      selectors: [[\"\", \"tuiDropdown\", \"\", \"tuiDropdownOpen\", \"\"], [\"\", \"tuiDropdown\", \"\", \"tuiDropdownOpenChange\", \"\"]],\n      contentQueries: function TuiDropdownOpen_ContentQueries(rf, ctx, dirIndex) {\n        if (rf & 1) {\n          i0.ɵɵcontentQuery(dirIndex, _c1, 5, ElementRef);\n        }\n        if (rf & 2) {\n          let _t;\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.dropdownHost = _t.first);\n        }\n      },\n      hostBindings: function TuiDropdownOpen_HostBindings(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵlistener(\"click\", function TuiDropdownOpen_click_HostBindingHandler($event) {\n            return ctx.onClick($event.target);\n          })(\"keydown.arrowDown\", function TuiDropdownOpen_keydown_arrowDown_HostBindingHandler($event) {\n            return ctx.onArrow($event, false);\n          })(\"keydown.arrowUp\", function TuiDropdownOpen_keydown_arrowUp_HostBindingHandler($event) {\n            return ctx.onArrow($event, true);\n          })(\"keydown.silent.capture\", function TuiDropdownOpen_keydown_silent_capture_HostBindingHandler($event) {\n            return ctx.onEsc($event);\n          }, false, i0.ɵɵresolveDocument)(\"keydown.silent\", function TuiDropdownOpen_keydown_silent_HostBindingHandler($event) {\n            return ctx.onKeydown($event);\n          }, false, i0.ɵɵresolveDocument);\n        }\n      },\n      inputs: {\n        tuiDropdownEnabled: \"tuiDropdownEnabled\",\n        tuiDropdownOpen: \"tuiDropdownOpen\"\n      },\n      outputs: {\n        tuiDropdownOpenChange: \"tuiDropdownOpenChange\"\n      },\n      standalone: true,\n      features: [i0.ɵɵProvidersFeature([TuiDropdownDriver, tuiAsDriver(TuiDropdownDriver)]), i0.ɵɵHostDirectivesFeature([i1$1.TuiObscured, {\n        directive: i1.TuiActiveZone,\n        inputs: [\"tuiActiveZoneParent\", \"tuiActiveZoneParent\"],\n        outputs: [\"tuiActiveZoneChange\", \"tuiActiveZoneChange\"]\n      }]), i0.ɵɵNgOnChangesFeature]\n    });\n  }\n}\n__decorate([shouldCall(shouldClose)], TuiDropdownOpen.prototype, \"onEsc\", null);\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(TuiDropdownOpen, [{\n    type: Directive,\n    args: [{\n      standalone: true,\n      selector: '[tuiDropdown][tuiDropdownOpen],[tuiDropdown][tuiDropdownOpenChange]',\n      providers: [TuiDropdownDriver, tuiAsDriver(TuiDropdownDriver)],\n      hostDirectives: [TuiObscured, {\n        directive: TuiActiveZone,\n        inputs: ['tuiActiveZoneParent'],\n        outputs: ['tuiActiveZoneChange']\n      }],\n      host: {\n        '(click)': 'onClick($event.target)',\n        '(keydown.arrowDown)': 'onArrow($event, false)',\n        '(keydown.arrowUp)': 'onArrow($event, true)',\n        '(document:keydown.silent.capture)': 'onEsc($event)',\n        '(document:keydown.silent)': 'onKeydown($event)'\n      }\n    }]\n  }], null, {\n    dropdownHost: [{\n      type: ContentChild,\n      args: ['tuiDropdownHost', {\n        descendants: true,\n        read: ElementRef\n      }]\n    }],\n    tuiDropdownEnabled: [{\n      type: Input\n    }],\n    tuiDropdownOpen: [{\n      type: Input\n    }],\n    tuiDropdownOpenChange: [{\n      type: Output\n    }],\n    onEsc: []\n  });\n})();\nclass TuiDropdownHover extends TuiDriver {\n  constructor() {\n    super(subscriber => this.stream$.subscribe(subscriber));\n    this.el = tuiInjectElement();\n    this.doc = inject(DOCUMENT);\n    this.options = inject(TUI_DROPDOWN_HOVER_OPTIONS);\n    this.activeZone = inject(TuiActiveZone);\n    this.open = inject(TuiDropdownOpen, {\n      optional: true\n    });\n    this.stream$ = merge(tuiTypedFromEvent(this.doc, 'mouseover').pipe(map(tuiGetActualTarget)), tuiTypedFromEvent(this.doc, 'mouseout').pipe(map(e => e.relatedTarget))).pipe(map(element => tuiIsElement(element) && this.isHovered(element)), distinctUntilChanged(), switchMap(v => of(v).pipe(delay(v ? this.showDelay : this.hideDelay))), tuiZoneOptimized(), tap(hovered => {\n      this.hovered = hovered;\n      this.open?.toggle(hovered);\n    }), share());\n    this.showDelay = this.options.showDelay;\n    this.hideDelay = this.options.hideDelay;\n    this.hovered = false;\n    this.type = 'dropdown';\n  }\n  onClick(event) {\n    if (this.hovered && this.open) {\n      event.preventDefault();\n    }\n  }\n  isHovered(element) {\n    const host = this.dropdownHost?.nativeElement || this.el;\n    const hovered = host.contains(element);\n    const child = !this.el.contains(element) && this.activeZone.contains(element);\n    return hovered || child;\n  }\n  static {\n    this.ɵfac = function TuiDropdownHover_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || TuiDropdownHover)();\n    };\n  }\n  static {\n    this.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n      type: TuiDropdownHover,\n      selectors: [[\"\", \"tuiDropdownHover\", \"\"]],\n      contentQueries: function TuiDropdownHover_ContentQueries(rf, ctx, dirIndex) {\n        if (rf & 1) {\n          i0.ɵɵcontentQuery(dirIndex, _c1, 5, ElementRef);\n        }\n        if (rf & 2) {\n          let _t;\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.dropdownHost = _t.first);\n        }\n      },\n      hostBindings: function TuiDropdownHover_HostBindings(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵlistener(\"click.capture\", function TuiDropdownHover_click_capture_HostBindingHandler($event) {\n            return ctx.onClick($event);\n          });\n        }\n      },\n      inputs: {\n        showDelay: [0, \"tuiDropdownShowDelay\", \"showDelay\"],\n        hideDelay: [0, \"tuiDropdownHideDelay\", \"hideDelay\"]\n      },\n      standalone: true,\n      features: [i0.ɵɵProvidersFeature([TuiActiveZone, tuiAsDriver(TuiDropdownHover)]), i0.ɵɵInheritDefinitionFeature]\n    });\n  }\n}\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(TuiDropdownHover, [{\n    type: Directive,\n    args: [{\n      standalone: true,\n      selector: '[tuiDropdownHover]',\n      providers: [TuiActiveZone, tuiAsDriver(TuiDropdownHover)],\n      host: {\n        '(click.capture)': 'onClick($event)'\n      }\n    }]\n  }], function () {\n    return [];\n  }, {\n    dropdownHost: [{\n      type: ContentChild,\n      args: ['tuiDropdownHost', {\n        descendants: true,\n        read: ElementRef\n      }]\n    }],\n    showDelay: [{\n      type: Input,\n      args: ['tuiDropdownShowDelay']\n    }],\n    hideDelay: [{\n      type: Input,\n      args: ['tuiDropdownHideDelay']\n    }]\n  });\n})();\nclass TuiDropdownManual {\n  constructor() {\n    this.driver = inject(TuiDropdownDriver);\n    this.tuiDropdownManual = false;\n  }\n  ngOnChanges() {\n    this.driver.next(!!this.tuiDropdownManual);\n  }\n  static {\n    this.ɵfac = function TuiDropdownManual_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || TuiDropdownManual)();\n    };\n  }\n  static {\n    this.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n      type: TuiDropdownManual,\n      selectors: [[\"\", \"tuiDropdownManual\", \"\"]],\n      inputs: {\n        tuiDropdownManual: \"tuiDropdownManual\"\n      },\n      standalone: true,\n      features: [i0.ɵɵProvidersFeature([TuiDropdownDriver, tuiAsDriver(TuiDropdownDriver)]), i0.ɵɵNgOnChangesFeature]\n    });\n  }\n}\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(TuiDropdownManual, [{\n    type: Directive,\n    args: [{\n      standalone: true,\n      selector: '[tuiDropdownManual]',\n      providers: [TuiDropdownDriver, tuiAsDriver(TuiDropdownDriver)]\n    }]\n  }], null, {\n    tuiDropdownManual: [{\n      type: Input\n    }]\n  });\n})();\n\n/**\n * @deprecated TODO: remove in v.5 when legacy controls are dropped\n */\nclass TuiDropdownOpenLegacy {\n  constructor() {\n    this.tuiDropdownOpenChange = new BehaviorSubject(false);\n  }\n  set tuiDropdownOpen(open) {\n    this.tuiDropdownOpenChange.next(open);\n  }\n  static {\n    this.ɵfac = function TuiDropdownOpenLegacy_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || TuiDropdownOpenLegacy)();\n    };\n  }\n  static {\n    this.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n      type: TuiDropdownOpenLegacy,\n      selectors: [[\"\", \"tuiDropdownOpen\", \"\", 3, \"tuiDropdown\", \"\"], [\"\", \"tuiDropdownOpenChange\", \"\", 3, \"tuiDropdown\", \"\"]],\n      inputs: {\n        tuiDropdownOpen: \"tuiDropdownOpen\"\n      },\n      outputs: {\n        tuiDropdownOpenChange: \"tuiDropdownOpenChange\"\n      },\n      standalone: true\n    });\n  }\n}\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(TuiDropdownOpenLegacy, [{\n    type: Directive,\n    args: [{\n      standalone: true,\n      selector: '[tuiDropdownOpen]:not([tuiDropdown]),[tuiDropdownOpenChange]:not([tuiDropdown])'\n    }]\n  }], null, {\n    tuiDropdownOpenChange: [{\n      type: Output\n    }],\n    tuiDropdownOpen: [{\n      type: Input\n    }]\n  });\n})();\nclass TuiDropdownPortal {\n  constructor() {\n    this.template = inject(TemplateRef);\n    this.service = inject(TuiDropdownService);\n  }\n  set tuiDropdown(show) {\n    this.viewRef?.destroy();\n    if (show) {\n      this.viewRef = this.service.addTemplate(this.template);\n    }\n  }\n  ngOnDestroy() {\n    this.viewRef?.destroy();\n  }\n  static {\n    this.ɵfac = function TuiDropdownPortal_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || TuiDropdownPortal)();\n    };\n  }\n  static {\n    this.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n      type: TuiDropdownPortal,\n      selectors: [[\"ng-template\", \"tuiDropdown\", \"\"]],\n      inputs: {\n        tuiDropdown: \"tuiDropdown\"\n      },\n      standalone: true\n    });\n  }\n}\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(TuiDropdownPortal, [{\n    type: Directive,\n    args: [{\n      standalone: true,\n      selector: 'ng-template[tuiDropdown]'\n    }]\n  }], null, {\n    tuiDropdown: [{\n      type: Input\n    }]\n  });\n})();\nclass TuiDropdownPositionSided extends TuiPositionAccessor {\n  constructor() {\n    super(...arguments);\n    this.options = inject(TUI_DROPDOWN_OPTIONS);\n    this.viewport = inject(TUI_VIEWPORT);\n    this.vertical = inject(TuiDropdownPosition);\n    this.previous = this.options.direction || 'bottom';\n    this.tuiDropdownSided = '';\n    this.tuiDropdownSidedOffset = 4;\n    this.type = 'dropdown';\n  }\n  getPosition(rect) {\n    if (this.tuiDropdownSided === false) {\n      return this.vertical.getPosition(rect);\n    }\n    const {\n      height,\n      width\n    } = rect;\n    const hostRect = this.vertical.accessor?.getClientRect() ?? EMPTY_CLIENT_RECT;\n    const viewport = this.viewport.getClientRect();\n    const {\n      direction,\n      minHeight,\n      offset\n    } = this.options;\n    const align = this.options.align === 'center' ? 'left' : this.options.align;\n    const available = {\n      top: hostRect.bottom - viewport.top,\n      left: hostRect.left - offset - viewport.left,\n      right: viewport.right - hostRect.right - offset,\n      bottom: viewport.bottom - hostRect.top\n    };\n    const position = {\n      top: hostRect.bottom - height + this.tuiDropdownSidedOffset + 1,\n      left: hostRect.left - width - offset,\n      right: hostRect.right + offset,\n      bottom: hostRect.top - this.tuiDropdownSidedOffset - 1 // 1 for border\n    };\n    const better = available.top > available.bottom ? 'top' : 'bottom';\n    const maxLeft = available.left > available.right ? position.left : position.right;\n    const left = available[align] > width ? position[align] : maxLeft;\n    if (available[this.previous] > minHeight && direction || this.previous === better) {\n      return [position[this.previous], left];\n    }\n    this.previous = better;\n    return [position[better], left];\n  }\n  static {\n    this.ɵfac = /* @__PURE__ */(() => {\n      let ɵTuiDropdownPositionSided_BaseFactory;\n      return function TuiDropdownPositionSided_Factory(__ngFactoryType__) {\n        return (ɵTuiDropdownPositionSided_BaseFactory || (ɵTuiDropdownPositionSided_BaseFactory = i0.ɵɵgetInheritedFactory(TuiDropdownPositionSided)))(__ngFactoryType__ || TuiDropdownPositionSided);\n      };\n    })();\n  }\n  static {\n    this.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n      type: TuiDropdownPositionSided,\n      selectors: [[\"\", \"tuiDropdownSided\", \"\"]],\n      inputs: {\n        tuiDropdownSided: \"tuiDropdownSided\",\n        tuiDropdownSidedOffset: \"tuiDropdownSidedOffset\"\n      },\n      standalone: true,\n      features: [i0.ɵɵProvidersFeature([TuiDropdownPosition, tuiAsPositionAccessor(TuiDropdownPositionSided)]), i0.ɵɵInheritDefinitionFeature]\n    });\n  }\n}\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(TuiDropdownPositionSided, [{\n    type: Directive,\n    args: [{\n      standalone: true,\n      selector: '[tuiDropdownSided]',\n      providers: [TuiDropdownPosition, tuiAsPositionAccessor(TuiDropdownPositionSided)]\n    }]\n  }], null, {\n    tuiDropdownSided: [{\n      type: Input\n    }],\n    tuiDropdownSidedOffset: [{\n      type: Input\n    }]\n  });\n})();\nclass TuiDropdownSelection extends TuiDriver {\n  constructor() {\n    super(subscriber => this.stream$.subscribe(subscriber));\n    this.doc = inject(DOCUMENT);\n    this.vcr = inject(ViewContainerRef);\n    this.dropdown = inject(TuiDropdownDirective);\n    this.el = tuiInjectElement();\n    this.handler$ = new BehaviorSubject(TUI_TRUE_HANDLER);\n    this.stream$ = combineLatest([this.handler$, inject(TUI_SELECTION_STREAM).pipe(map(() => this.getRange()), distinctUntilChanged((x, y) => x.startOffset === y.startOffset && x.endOffset === y.endOffset && x.commonAncestorContainer === y.commonAncestorContainer))]).pipe(map(([handler, range]) => {\n      const contained = this.el.contains(range.commonAncestorContainer);\n      this.range = contained && tuiIsTextNode(range.commonAncestorContainer) ? range : this.range;\n      return contained && handler(this.range) || this.inDropdown(range);\n    }));\n    this.range = inject(TUI_RANGE);\n    this.position = 'selection';\n    this.type = 'dropdown';\n  }\n  set tuiDropdownSelection(visible) {\n    if (!tuiIsString(visible)) {\n      this.handler$.next(visible);\n    }\n  }\n  getClientRect() {\n    switch (this.position) {\n      case 'tag':\n        {\n          const {\n            commonAncestorContainer\n          } = this.range;\n          const element = tuiIsElement(commonAncestorContainer) ? commonAncestorContainer : commonAncestorContainer.parentNode;\n          return element && tuiIsElement(element) ? element.getBoundingClientRect() : EMPTY_CLIENT_RECT;\n        }\n      case 'word':\n        return tuiGetWordRange(this.range).getBoundingClientRect();\n      default:\n        return this.range.getBoundingClientRect();\n    }\n  }\n  ngOnDestroy() {\n    if (this.ghost) {\n      this.vcr.element.nativeElement.removeChild(this.ghost);\n    }\n  }\n  getRange() {\n    const active = tuiGetNativeFocused(this.doc);\n    const selection = this.doc.getSelection();\n    const range = active && tuiIsTextfield(active) && this.el.contains(active) ? this.veryVerySadInputFix(active) : selection?.rangeCount && selection.getRangeAt(0) || this.range;\n    return range.cloneRange();\n  }\n  /**\n   * Check if given range is at least partially inside dropdown\n   */\n  inDropdown(range) {\n    const {\n      startContainer,\n      endContainer\n    } = range;\n    const inDropdown = this.boxContains(range.commonAncestorContainer);\n    const hostToDropdown = this.boxContains(endContainer) && this.el.contains(startContainer);\n    const dropdownToHost = this.boxContains(startContainer) && this.el.contains(endContainer);\n    return inDropdown || hostToDropdown || dropdownToHost;\n  }\n  /**\n   * Check if Node is inside dropdown\n   */\n  boxContains(node) {\n    return !!this.dropdown.ref()?.location.nativeElement.contains(node);\n  }\n  veryVerySadInputFix(element) {\n    const {\n      ghost = this.initGhost(element)\n    } = this;\n    const {\n      top,\n      left,\n      width,\n      height\n    } = element.getBoundingClientRect();\n    const {\n      selectionStart,\n      selectionEnd,\n      value\n    } = element;\n    const range = this.doc.createRange();\n    const hostRect = this.el.getBoundingClientRect();\n    ghost.style.top = tuiPx(top - hostRect.top);\n    ghost.style.left = tuiPx(left - hostRect.left);\n    ghost.style.width = tuiPx(width);\n    ghost.style.height = tuiPx(height);\n    ghost.textContent = CHAR_ZERO_WIDTH_SPACE + value + CHAR_NO_BREAK_SPACE;\n    range.setStart(ghost.firstChild, selectionStart || 0);\n    range.setEnd(ghost.firstChild, selectionEnd || 0);\n    return range;\n  }\n  /**\n   * Create an invisible DIV styled exactly like input/textarea element inside directive\n   */\n  initGhost(element) {\n    const ghost = this.doc.createElement('div');\n    const {\n      font,\n      letterSpacing,\n      textTransform,\n      padding\n    } = getComputedStyle(element);\n    ghost.style.position = 'absolute';\n    ghost.style.pointerEvents = 'none';\n    ghost.style.opacity = '0';\n    ghost.style.whiteSpace = 'pre-wrap';\n    ghost.style.font = font;\n    ghost.style.letterSpacing = letterSpacing;\n    ghost.style.textTransform = textTransform;\n    ghost.style.padding = padding;\n    this.vcr.element.nativeElement.appendChild(ghost);\n    this.ghost = ghost;\n    return ghost;\n  }\n  static {\n    this.ɵfac = function TuiDropdownSelection_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || TuiDropdownSelection)();\n    };\n  }\n  static {\n    this.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n      type: TuiDropdownSelection,\n      selectors: [[\"\", \"tuiDropdownSelection\", \"\"]],\n      inputs: {\n        position: [0, \"tuiDropdownSelectionPosition\", \"position\"],\n        tuiDropdownSelection: \"tuiDropdownSelection\"\n      },\n      standalone: true,\n      features: [i0.ɵɵProvidersFeature([tuiAsDriver(TuiDropdownSelection), tuiAsRectAccessor(TuiDropdownSelection)]), i0.ɵɵInheritDefinitionFeature]\n    });\n  }\n}\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(TuiDropdownSelection, [{\n    type: Directive,\n    args: [{\n      standalone: true,\n      selector: '[tuiDropdownSelection]',\n      providers: [tuiAsDriver(TuiDropdownSelection), tuiAsRectAccessor(TuiDropdownSelection)]\n    }]\n  }], function () {\n    return [];\n  }, {\n    position: [{\n      type: Input,\n      args: ['tuiDropdownSelectionPosition']\n    }],\n    tuiDropdownSelection: [{\n      type: Input\n    }]\n  });\n})();\nconst TuiDropdown = [TuiDropdownOptionsDirective, TuiDropdownDriverDirective, TuiDropdownDirective, TuiDropdownComponent, TuiDropdownOpen, TuiDropdownOpenLegacy, TuiDropdownPortal, TuiDropdownManual, TuiDropdownHover, TuiDropdownContext, TuiDropdownPosition, TuiDropdownPositionSided, TuiDropdownSelection];\nfunction tuiDropdown(value) {\n  return tuiDirectiveBinding(TuiDropdownDirective, 'tuiDropdown', value, {});\n}\nfunction tuiDropdownOpen() {\n  const open = tuiDirectiveBinding(TuiDropdownOpen, 'tuiDropdownOpen', false, {});\n  inject(TuiDropdownOpen).tuiDropdownOpenChange.pipe(takeUntilDestroyed()).subscribe(value => open.set(value));\n  return open;\n}\nclass TuiDropdownFixed {\n  constructor() {\n    const override = tuiOverrideOptions$1({\n      limitWidth: 'fixed'\n    }, TUI_DROPDOWN_DEFAULT_OPTIONS);\n    override(inject(TUI_DROPDOWN_OPTIONS, {\n      self: true,\n      optional: true\n    }), null);\n  }\n  static {\n    this.ɵfac = function TuiDropdownFixed_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || TuiDropdownFixed)();\n    };\n  }\n  static {\n    this.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n      type: TuiDropdownFixed,\n      standalone: true,\n      features: [i0.ɵɵProvidersFeature([tuiDropdownOptionsProvider({})])]\n    });\n  }\n}\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(TuiDropdownFixed, [{\n    type: Directive,\n    args: [{\n      standalone: true,\n      providers: [tuiDropdownOptionsProvider({})]\n    }]\n  }], function () {\n    return [];\n  }, null);\n})();\n\n/**\n * Host element for dynamically created portals, for example using {@link TuiDropdownDirective}.\n */\nclass TuiDropdowns extends TuiPortals {\n  static {\n    this.ɵfac = /* @__PURE__ */(() => {\n      let ɵTuiDropdowns_BaseFactory;\n      return function TuiDropdowns_Factory(__ngFactoryType__) {\n        return (ɵTuiDropdowns_BaseFactory || (ɵTuiDropdowns_BaseFactory = i0.ɵɵgetInheritedFactory(TuiDropdowns)))(__ngFactoryType__ || TuiDropdowns);\n      };\n    })();\n  }\n  static {\n    this.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n      type: TuiDropdowns,\n      selectors: [[\"tui-dropdowns\"]],\n      standalone: true,\n      features: [i0.ɵɵProvidersFeature([tuiAsPortal(TuiDropdownService)]), i0.ɵɵInheritDefinitionFeature, i0.ɵɵStandaloneFeature],\n      ngContentSelectors: _c2,\n      decls: 3,\n      vars: 0,\n      consts: [[\"viewContainer\", \"\"]],\n      template: function TuiDropdowns_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵprojectionDef();\n          i0.ɵɵprojection(0);\n          i0.ɵɵelementContainer(1, null, 0);\n        }\n      },\n      styles: [\"[_nghost-%COMP%]{display:block;height:100%;isolation:isolate}\"],\n      changeDetection: 0\n    });\n  }\n}\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(TuiDropdowns, [{\n    type: Component,\n    args: [{\n      standalone: true,\n      selector: 'tui-dropdowns',\n      template: `\n        <ng-content></ng-content>\n        <ng-container #viewContainer></ng-container>\n    `,\n      changeDetection: ChangeDetectionStrategy.OnPush,\n      providers: [tuiAsPortal(TuiDropdownService)],\n      styles: [\":host{display:block;height:100%;isolation:isolate}\\n\"]\n    }]\n  }], null, null);\n})();\nclass TuiWithDropdownOpen {\n  static {\n    this.ɵfac = function TuiWithDropdownOpen_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || TuiWithDropdownOpen)();\n    };\n  }\n  static {\n    this.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n      type: TuiWithDropdownOpen,\n      standalone: true,\n      features: [i0.ɵɵHostDirectivesFeature([{\n        directive: TuiDropdownOpen,\n        inputs: [\"tuiDropdownOpen\", \"open\"],\n        outputs: [\"tuiDropdownOpenChange\", \"openChange\"]\n      }])]\n    });\n  }\n}\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(TuiWithDropdownOpen, [{\n    type: Directive,\n    args: [{\n      standalone: true,\n      hostDirectives: [{\n        directive: TuiDropdownOpen,\n        inputs: ['tuiDropdownOpen: open'],\n        outputs: ['tuiDropdownOpenChange: openChange']\n      }]\n    }]\n  }], null, null);\n})();\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { TUI_DROPDOWN_COMPONENT, TUI_DROPDOWN_CONTEXT, TUI_DROPDOWN_DEFAULT_OPTIONS, TUI_DROPDOWN_HOVER_DEFAULT_OPTIONS, TUI_DROPDOWN_HOVER_OPTIONS, TUI_DROPDOWN_OPTIONS, TuiDropdown, TuiDropdownComponent, TuiDropdownContext, TuiDropdownDirective, TuiDropdownDriver, TuiDropdownDriverDirective, TuiDropdownFixed, TuiDropdownHover, TuiDropdownManual, TuiDropdownOpen, TuiDropdownOpenLegacy, TuiDropdownOptionsDirective, TuiDropdownPortal, TuiDropdownPosition, TuiDropdownPositionSided, TuiDropdownSelection, TuiDropdownService, TuiDropdowns, TuiWithDropdownOpen, tuiDropdown, tuiDropdownHoverOptionsProvider, tuiDropdownOpen, tuiDropdownOptionsProvider };","map":{"version":3,"names":["i0","Injectable","Directive","Optional","Self","SkipSelf","inject","Input","ChangeDetectorRef","INJECTOR","signal","TemplateRef","Component","ChangeDetectionStrategy","computed","EventEmitter","ElementRef","ContentChild","Output","ViewContainerRef","takeUntilDestroyed","WA_WINDOW","i1","TuiActiveZone","tuiInjectElement","tuiGetActualTarget","tuiPointToClientRect","tuiIsElement","tuiIsHTMLElement","tuiIsElementEditable","tuiIsTextNode","tuiIsTextfield","tuiClamp","tuiCreateTokenFromFactory","tuiCreateToken","tuiProvide","tuiPure","tuiPx","tuiProvideOptions","tuiIsString","tuiDirectiveBinding","tuiDropdownAnimation","TuiDriverDirective","TuiPositionAccessor","tuiFallbackAccessor","TuiRectAccessor","tuiAsRectAccessor","tuiAsVehicle","tuiPositionAccessorFor","tuiRectAccessorFor","tuiAsDriver","TuiDriver","tuiAsPositionAccessor","TuiScrollbar","TuiVisualViewportService","TuiPositionService","TUI_VIEWPORT","TUI_ANIMATIONS_SPEED","TUI_SELECTION_STREAM","tuiOverrideOptions","tuiCheckFixedPosition","tuiToAnimationOptions","tuiGetWordRange","PolymorpheusComponent","PolymorpheusTemplate","PolymorpheusOutlet","Subject","throttleTime","takeWhile","map","merge","filter","fromEvent","distinctUntilChanged","switchMap","of","delay","tap","share","BehaviorSubject","combineLatest","__decorate","tuiZonefreeScheduler","tuiWatch","tuiTypedFromEvent","tuiZoneOptimized","TuiPortalService","TuiPortals","tuiAsPortal","EMPTY_CLIENT_RECT","TUI_TRUE_HANDLER","CHAR_ZERO_WIDTH_SPACE","CHAR_NO_BREAK_SPACE","TUI_IS_TOUCH","TUI_RANGE","shouldCall","DOCUMENT","i1$1","TuiObscured","tuiIsNativeKeyboardFocusable","tuiGetClosestFocusable","tuiIsNativeFocusedIn","tuiGetNativeFocused","tuiIsEditingKey","tuiOverrideOptions$1","_c0","a0","$implicit","TuiDropdownComponent_div_1_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","text_r1","polymorpheusOutlet","ɵɵadvance","ɵɵtextInterpolate1","_c1","_c2","TuiDropdownDriver","constructor","arguments","type","ɵfac","ɵTuiDropdownDriver_BaseFactory","TuiDropdownDriver_Factory","__ngFactoryType__","ɵɵgetInheritedFactory","ɵprov","ɵɵdefineInjectable","token","factory","ngDevMode","ɵsetClassMetadata","TuiDropdownDriverDirective","ɵTuiDropdownDriverDirective_BaseFactory","TuiDropdownDriverDirective_Factory","ɵdir","ɵɵdefineDirective","selectors","standalone","features","ɵɵInheritDefinitionFeature","args","selector","TUI_DROPDOWN_COMPONENT","TuiDropdownComponent","TUI_DROPDOWN_CONTEXT","TuiDropdownService","ɵTuiDropdownService_BaseFactory","TuiDropdownService_Factory","providedIn","TUI_DROPDOWN_DEFAULT_OPTIONS","align","direction","limitWidth","maxHeight","minHeight","offset","appearance","TUI_DROPDOWN_OPTIONS","tuiDropdownOptionsProvider","override","provide","deps","TuiDropdownOptionsDirective","useFactory","options","skipSelf","TuiDropdownOptionsDirective_Factory","inputs","ɵɵProvidersFeature","providers","TuiDropdownPosition","viewport","accessor","TuiDropdownDirective","optional","getPosition","width","height","previous","undefined","hostRect","getClientRect","viewportRect","top","bottom","right","left","available","rectWidth","Math","max","position","center","better","ɵTuiDropdownPosition_BaseFactory","TuiDropdownPosition_Factory","refresh$","service","cdr","sub","pipe","subscribe","ref","changeDetectorRef","detectChanges","markForCheck","el","component","tuiDropdown","content","ngAfterViewChecked","next","ngOnChanges","toggle","ngOnDestroy","getBoundingClientRect","show","set","add","remove","TuiDropdownDirective_Factory","exportAs","ɵɵHostDirectivesFeature","ɵɵNgOnChangesFeature","prototype","hostDirectives","win","vvs","animation","directive","context","theme","closest","getAttribute","isConnected","offsetParent","v","correct","getStyles","styles","Object","assign","style","complete","close","innerHeight","clientRect","rect","offsetX","offsetY","sided","isIntersecting","round","minWidth","TuiDropdownComponent_Factory","ɵcmp","ɵɵdefineComponent","hostVars","hostBindings","TuiDropdownComponent_HostBindings","ɵɵsyntheticHostProperty","ɵɵattribute","ɵɵStandaloneFeature","decls","vars","consts","template","TuiDropdownComponent_Template","ɵɵtemplate","ɵɵproperty","ɵɵpureFunction1","dependencies","data","imports","changeDetection","Default","animations","host","activeZoneFilter","event","activeZone","contains","TuiDropdownContext","isTouch","driver","currentRect","userSelect","closeDropdown","_event","onContextMenu","x","y","ɵTuiDropdownContext_BaseFactory","TuiDropdownContext_Factory","TuiDropdownContext_HostBindings","ɵɵlistener","TuiDropdownContext_pointerdown_silent_HostBindingHandler","$event","ɵɵresolveDocument","TuiDropdownContext_contextmenu_capture_silent_HostBindingHandler","TuiDropdownContext_keydown_esc_HostBindingHandler","TuiDropdownContext_longtap_HostBindingHandler","detail","clientX","clientY","ɵɵstyleProp","TUI_DROPDOWN_HOVER_DEFAULT_OPTIONS","showDelay","hideDelay","TUI_DROPDOWN_HOVER_OPTIONS","tuiDropdownHoverOptionsProvider","shouldClose","key","toLowerCase","tuiDropdownEnabled","tuiDropdownOpen","nextElementSibling","TuiDropdownOpen","obscured","dropdown","location","nativeElement","tuiObscured","Boolean","tuiActiveZoneChange","a","target","tuiDropdownOpenChange","update","open","focused","focus","preventScroll","onEsc","preventDefault","onClick","editable","onArrow","up","focusDropdown","onKeydown","defaultPrevented","initial","dropdownHost","focusable","root","emit","drive","tuiObscuredEnabled","doc","ownerDocument","child","appendChild","createElement","TuiDropdownOpen_Factory","contentQueries","TuiDropdownOpen_ContentQueries","dirIndex","ɵɵcontentQuery","_t","ɵɵqueryRefresh","ɵɵloadQuery","first","TuiDropdownOpen_HostBindings","TuiDropdownOpen_click_HostBindingHandler","TuiDropdownOpen_keydown_arrowDown_HostBindingHandler","TuiDropdownOpen_keydown_arrowUp_HostBindingHandler","TuiDropdownOpen_keydown_silent_capture_HostBindingHandler","TuiDropdownOpen_keydown_silent_HostBindingHandler","outputs","descendants","read","TuiDropdownHover","subscriber","stream$","e","relatedTarget","element","isHovered","hovered","TuiDropdownHover_Factory","TuiDropdownHover_ContentQueries","TuiDropdownHover_HostBindings","TuiDropdownHover_click_capture_HostBindingHandler","TuiDropdownManual","tuiDropdownManual","TuiDropdownManual_Factory","TuiDropdownOpenLegacy","TuiDropdownOpenLegacy_Factory","TuiDropdownPortal","viewRef","destroy","addTemplate","TuiDropdownPortal_Factory","TuiDropdownPositionSided","vertical","tuiDropdownSided","tuiDropdownSidedOffset","maxLeft","ɵTuiDropdownPositionSided_BaseFactory","TuiDropdownPositionSided_Factory","TuiDropdownSelection","vcr","handler$","getRange","startOffset","endOffset","commonAncestorContainer","handler","range","contained","inDropdown","tuiDropdownSelection","visible","parentNode","ghost","removeChild","active","selection","getSelection","veryVerySadInputFix","rangeCount","getRangeAt","cloneRange","startContainer","endContainer","boxContains","hostToDropdown","dropdownToHost","node","initGhost","selectionStart","selectionEnd","value","createRange","textContent","setStart","firstChild","setEnd","font","letterSpacing","textTransform","padding","getComputedStyle","pointerEvents","opacity","whiteSpace","TuiDropdownSelection_Factory","TuiDropdown","TuiDropdownFixed","self","TuiDropdownFixed_Factory","TuiDropdowns","ɵTuiDropdowns_BaseFactory","TuiDropdowns_Factory","ngContentSelectors","TuiDropdowns_Template","ɵɵprojectionDef","ɵɵprojection","ɵɵelementContainer","OnPush","TuiWithDropdownOpen","TuiWithDropdownOpen_Factory"],"sources":["C:/Users/Asus-PC/Downloads/WebLibraryNew/WebLibrary/WebLibraryApp/Frontend/node_modules/@taiga-ui/core/fesm2022/taiga-ui-core-directives-dropdown.mjs"],"sourcesContent":["import * as i0 from '@angular/core';\nimport { Injectable, Directive, Optional, Self, SkipSelf, inject, Input, ChangeDetectorRef, INJECTOR, signal, TemplateRef, Component, ChangeDetectionStrategy, computed, EventEmitter, ElementRef, ContentChild, Output, ViewContainerRef } from '@angular/core';\nimport { takeUntilDestroyed } from '@angular/core/rxjs-interop';\nimport { WA_WINDOW } from '@ng-web-apis/common';\nimport * as i1 from '@taiga-ui/cdk/directives/active-zone';\nimport { TuiActiveZone } from '@taiga-ui/cdk/directives/active-zone';\nimport { tuiInjectElement, tuiGetActualTarget, tuiPointToClientRect, tuiIsElement, tuiIsHTMLElement, tuiIsElementEditable, tuiIsTextNode, tuiIsTextfield } from '@taiga-ui/cdk/utils/dom';\nimport { tuiClamp } from '@taiga-ui/cdk/utils/math';\nimport { tuiCreateTokenFromFactory, tuiCreateToken, tuiProvide, tuiPure, tuiPx, tuiProvideOptions, tuiIsString, tuiDirectiveBinding } from '@taiga-ui/cdk/utils/miscellaneous';\nimport { tuiDropdownAnimation } from '@taiga-ui/core/animations';\nimport { TuiDriverDirective, TuiPositionAccessor, tuiFallbackAccessor, TuiRectAccessor, tuiAsRectAccessor, tuiAsVehicle, tuiPositionAccessorFor, tuiRectAccessorFor, tuiAsDriver, TuiDriver, tuiAsPositionAccessor } from '@taiga-ui/core/classes';\nimport { TuiScrollbar } from '@taiga-ui/core/components/scrollbar';\nimport { TuiVisualViewportService, TuiPositionService } from '@taiga-ui/core/services';\nimport { TUI_VIEWPORT, TUI_ANIMATIONS_SPEED, TUI_SELECTION_STREAM } from '@taiga-ui/core/tokens';\nimport { tuiOverrideOptions, tuiCheckFixedPosition, tuiToAnimationOptions, tuiGetWordRange } from '@taiga-ui/core/utils';\nimport { PolymorpheusComponent, PolymorpheusTemplate, PolymorpheusOutlet } from '@taiga-ui/polymorpheus';\nimport { Subject, throttleTime, takeWhile, map, merge, filter, fromEvent, distinctUntilChanged, switchMap, of, delay, tap, share, BehaviorSubject, combineLatest } from 'rxjs';\nimport { __decorate } from 'tslib';\nimport { tuiZonefreeScheduler, tuiWatch, tuiTypedFromEvent, tuiZoneOptimized } from '@taiga-ui/cdk/observables';\nimport { TuiPortalService, TuiPortals, tuiAsPortal } from '@taiga-ui/cdk/classes';\nimport { EMPTY_CLIENT_RECT, TUI_TRUE_HANDLER, CHAR_ZERO_WIDTH_SPACE, CHAR_NO_BREAK_SPACE } from '@taiga-ui/cdk/constants';\nimport { TUI_IS_TOUCH, TUI_RANGE } from '@taiga-ui/cdk/tokens';\nimport { shouldCall } from '@taiga-ui/event-plugins';\nimport { DOCUMENT } from '@angular/common';\nimport * as i1$1 from '@taiga-ui/cdk/directives/obscured';\nimport { TuiObscured } from '@taiga-ui/cdk/directives/obscured';\nimport { tuiIsNativeKeyboardFocusable, tuiGetClosestFocusable, tuiIsNativeFocusedIn, tuiGetNativeFocused } from '@taiga-ui/cdk/utils/focus';\nimport { tuiIsEditingKey, tuiOverrideOptions as tuiOverrideOptions$1 } from '@taiga-ui/core/utils/miscellaneous';\n\nclass TuiDropdownDriver extends Subject {\n    constructor() {\n        super(...arguments);\n        this.type = 'dropdown';\n    }\n    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"16.2.12\", ngImport: i0, type: TuiDropdownDriver, deps: null, target: i0.ɵɵFactoryTarget.Injectable }); }\n    static { this.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"16.2.12\", ngImport: i0, type: TuiDropdownDriver }); }\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"16.2.12\", ngImport: i0, type: TuiDropdownDriver, decorators: [{\n            type: Injectable\n        }] });\nclass TuiDropdownDriverDirective extends TuiDriverDirective {\n    constructor() {\n        super(...arguments);\n        this.type = 'dropdown';\n    }\n    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"16.2.12\", ngImport: i0, type: TuiDropdownDriverDirective, deps: null, target: i0.ɵɵFactoryTarget.Directive }); }\n    static { this.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"14.0.0\", version: \"16.2.12\", type: TuiDropdownDriverDirective, isStandalone: true, selector: \"[tuiDropdownDriver]\", usesInheritance: true, ngImport: i0 }); }\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"16.2.12\", ngImport: i0, type: TuiDropdownDriverDirective, decorators: [{\n            type: Directive,\n            args: [{\n                    standalone: true,\n                    selector: '[tuiDropdownDriver]',\n                }]\n        }] });\n\n/**\n * A component to display a dropdown\n */\nconst TUI_DROPDOWN_COMPONENT = tuiCreateTokenFromFactory(() => TuiDropdownComponent);\nconst TUI_DROPDOWN_CONTEXT = tuiCreateToken();\n\nclass TuiDropdownService extends TuiPortalService {\n    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"16.2.12\", ngImport: i0, type: TuiDropdownService, deps: null, target: i0.ɵɵFactoryTarget.Injectable }); }\n    static { this.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"16.2.12\", ngImport: i0, type: TuiDropdownService, providedIn: 'root' }); }\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"16.2.12\", ngImport: i0, type: TuiDropdownService, decorators: [{\n            type: Injectable,\n            args: [{\n                    providedIn: 'root',\n                }]\n        }] });\n\n/** Default values for dropdown options */\nconst TUI_DROPDOWN_DEFAULT_OPTIONS = {\n    align: 'left',\n    direction: null,\n    limitWidth: 'auto',\n    maxHeight: 400,\n    minHeight: 80,\n    offset: 4,\n    appearance: '',\n};\n/**\n * Default parameters for dropdown directive\n */\nconst TUI_DROPDOWN_OPTIONS = tuiCreateToken(TUI_DROPDOWN_DEFAULT_OPTIONS);\nconst tuiDropdownOptionsProvider = (override) => ({\n    provide: TUI_DROPDOWN_OPTIONS,\n    deps: [\n        [new Optional(), new Self(), TuiDropdownOptionsDirective],\n        [new Optional(), new SkipSelf(), TUI_DROPDOWN_OPTIONS],\n    ],\n    useFactory: tuiOverrideOptions(override, TUI_DROPDOWN_DEFAULT_OPTIONS),\n});\nclass TuiDropdownOptionsDirective {\n    constructor() {\n        this.options = inject(TUI_DROPDOWN_OPTIONS, { skipSelf: true });\n        this.align = this.options.align;\n        this.appearance = this.options.appearance;\n        this.direction = this.options.direction;\n        this.limitWidth = this.options.limitWidth;\n        this.minHeight = this.options.minHeight;\n        this.maxHeight = this.options.maxHeight;\n        this.offset = this.options.offset;\n    }\n    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"16.2.12\", ngImport: i0, type: TuiDropdownOptionsDirective, deps: [], target: i0.ɵɵFactoryTarget.Directive }); }\n    static { this.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"14.0.0\", version: \"16.2.12\", type: TuiDropdownOptionsDirective, isStandalone: true, selector: \"[tuiDropdownAlign], [tuiDropdownAppearance], [tuiDropdownDirection], [tuiDropdownLimitWidth], [tuiDropdownMinHeight], [tuiDropdownMaxHeight], [tuiDropdownOffset]\", inputs: { align: [\"tuiDropdownAlign\", \"align\"], appearance: [\"tuiDropdownAppearance\", \"appearance\"], direction: [\"tuiDropdownDirection\", \"direction\"], limitWidth: [\"tuiDropdownLimitWidth\", \"limitWidth\"], minHeight: [\"tuiDropdownMinHeight\", \"minHeight\"], maxHeight: [\"tuiDropdownMaxHeight\", \"maxHeight\"], offset: [\"tuiDropdownOffset\", \"offset\"] }, providers: [tuiProvide(TUI_DROPDOWN_OPTIONS, TuiDropdownOptionsDirective)], ngImport: i0 }); }\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"16.2.12\", ngImport: i0, type: TuiDropdownOptionsDirective, decorators: [{\n            type: Directive,\n            args: [{\n                    standalone: true,\n                    selector: '[tuiDropdownAlign], [tuiDropdownAppearance], [tuiDropdownDirection], [tuiDropdownLimitWidth], [tuiDropdownMinHeight], [tuiDropdownMaxHeight], [tuiDropdownOffset]',\n                    providers: [tuiProvide(TUI_DROPDOWN_OPTIONS, TuiDropdownOptionsDirective)],\n                }]\n        }], propDecorators: { align: [{\n                type: Input,\n                args: ['tuiDropdownAlign']\n            }], appearance: [{\n                type: Input,\n                args: ['tuiDropdownAppearance']\n            }], direction: [{\n                type: Input,\n                args: ['tuiDropdownDirection']\n            }], limitWidth: [{\n                type: Input,\n                args: ['tuiDropdownLimitWidth']\n            }], minHeight: [{\n                type: Input,\n                args: ['tuiDropdownMinHeight']\n            }], maxHeight: [{\n                type: Input,\n                args: ['tuiDropdownMaxHeight']\n            }], offset: [{\n                type: Input,\n                args: ['tuiDropdownOffset']\n            }] } });\n\nclass TuiDropdownPosition extends TuiPositionAccessor {\n    constructor() {\n        super(...arguments);\n        this.options = inject(TUI_DROPDOWN_OPTIONS);\n        this.viewport = inject(TUI_VIEWPORT);\n        this.type = 'dropdown';\n        this.accessor = tuiFallbackAccessor('dropdown')(inject(TuiRectAccessor), inject(TuiDropdownDirective, { optional: true }));\n    }\n    getPosition({ width, height }) {\n        if (!width && !height) {\n            this.previous = undefined;\n        }\n        const hostRect = this.accessor?.getClientRect() ?? EMPTY_CLIENT_RECT;\n        const viewportRect = this.viewport.getClientRect();\n        const { minHeight, align, direction, offset, limitWidth } = this.options;\n        const viewport = {\n            top: viewportRect.top - offset,\n            bottom: viewportRect.bottom + offset,\n            right: viewportRect.right - offset,\n            left: viewportRect.left + offset,\n        };\n        const previous = this.previous || direction || 'bottom';\n        const available = {\n            top: hostRect.top - 2 * offset - viewport.top,\n            bottom: viewport.bottom - hostRect.bottom - 2 * offset,\n        };\n        const rectWidth = limitWidth === 'fixed' ? hostRect.width : width;\n        const right = Math.max(hostRect.right - rectWidth, offset);\n        const left = hostRect.left + width < viewport.right ? hostRect.left : right;\n        const position = {\n            top: hostRect.top - offset - height,\n            bottom: hostRect.bottom + offset,\n            right: Math.max(viewport.left, right),\n            center: hostRect.left + hostRect.width / 2 + width / 2 < viewport.right\n                ? hostRect.left + hostRect.width / 2 - width / 2\n                : right,\n            left: Math.max(viewport.left, left),\n        };\n        const better = available.top > available.bottom ? 'top' : 'bottom';\n        if ((available[previous] > minHeight && direction) ||\n            available[previous] > height) {\n            return [position[previous], position[align]];\n        }\n        this.previous = better;\n        return [position[better], position[align]];\n    }\n    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"16.2.12\", ngImport: i0, type: TuiDropdownPosition, deps: null, target: i0.ɵɵFactoryTarget.Directive }); }\n    static { this.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"14.0.0\", version: \"16.2.12\", type: TuiDropdownPosition, isStandalone: true, selector: \"[tuiDropdownPosition]\", usesInheritance: true, ngImport: i0 }); }\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"16.2.12\", ngImport: i0, type: TuiDropdownPosition, decorators: [{\n            type: Directive,\n            args: [{\n                    standalone: true,\n                    selector: '[tuiDropdownPosition]',\n                }]\n        }] });\n\nclass TuiDropdownDirective {\n    constructor() {\n        this.refresh$ = new Subject();\n        this.service = inject(TuiDropdownService);\n        this.cdr = inject(ChangeDetectorRef);\n        this.sub = this.refresh$\n            .pipe(throttleTime(0, tuiZonefreeScheduler()), takeUntilDestroyed())\n            .subscribe(() => {\n            this.ref()?.changeDetectorRef.detectChanges();\n            this.ref()?.changeDetectorRef.markForCheck();\n        });\n        this.el = tuiInjectElement();\n        this.type = 'dropdown';\n        this.component = new PolymorpheusComponent(inject(TUI_DROPDOWN_COMPONENT), inject(INJECTOR));\n        this.ref = signal(null);\n    }\n    set tuiDropdown(content) {\n        this.content =\n            content instanceof TemplateRef\n                ? new PolymorpheusTemplate(content, this.cdr)\n                : content;\n    }\n    get position() {\n        return tuiCheckFixedPosition(this.el) ? 'fixed' : 'absolute';\n    }\n    ngAfterViewChecked() {\n        this.refresh$.next();\n    }\n    ngOnChanges() {\n        if (!this.content) {\n            this.toggle(false);\n        }\n    }\n    ngOnDestroy() {\n        this.toggle(false);\n    }\n    getClientRect() {\n        return this.el.getBoundingClientRect();\n    }\n    toggle(show) {\n        const ref = this.ref();\n        if (show && this.content && !ref) {\n            this.ref.set(this.service.add(this.component));\n        }\n        else if (!show && ref) {\n            this.ref.set(null);\n            this.service.remove(ref);\n        }\n    }\n    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"16.2.12\", ngImport: i0, type: TuiDropdownDirective, deps: [], target: i0.ɵɵFactoryTarget.Directive }); }\n    static { this.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"14.0.0\", version: \"16.2.12\", type: TuiDropdownDirective, isStandalone: true, selector: \"[tuiDropdown]:not(ng-container):not(ng-template)\", inputs: { tuiDropdown: \"tuiDropdown\" }, providers: [\n            tuiAsRectAccessor(TuiDropdownDirective),\n            tuiAsVehicle(TuiDropdownDirective),\n        ], exportAs: [\"tuiDropdown\"], usesOnChanges: true, hostDirectives: [{ directive: TuiDropdownDriverDirective }, { directive: TuiDropdownPosition }], ngImport: i0 }); }\n}\n__decorate([\n    tuiPure\n], TuiDropdownDirective.prototype, \"position\", null);\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"16.2.12\", ngImport: i0, type: TuiDropdownDirective, decorators: [{\n            type: Directive,\n            args: [{\n                    standalone: true,\n                    selector: '[tuiDropdown]:not(ng-container):not(ng-template)',\n                    providers: [\n                        tuiAsRectAccessor(TuiDropdownDirective),\n                        tuiAsVehicle(TuiDropdownDirective),\n                    ],\n                    exportAs: 'tuiDropdown',\n                    hostDirectives: [TuiDropdownDriverDirective, TuiDropdownPosition],\n                }]\n        }], propDecorators: { tuiDropdown: [{\n                type: Input\n            }], position: [] } });\n\n/**\n * @description:\n * This component is used to show template in a portal\n * using default style of white rounded box with a shadow\n */\nclass TuiDropdownComponent {\n    constructor() {\n        this.el = tuiInjectElement();\n        this.accessor = inject(TuiRectAccessor);\n        this.win = inject(WA_WINDOW);\n        this.vvs = inject(TuiVisualViewportService);\n        this.animation = tuiToAnimationOptions(inject(TUI_ANIMATIONS_SPEED));\n        this.options = inject(TUI_DROPDOWN_OPTIONS);\n        this.directive = inject(TuiDropdownDirective);\n        this.context = inject(TUI_DROPDOWN_CONTEXT, { optional: true });\n        this.theme = this.directive.el\n            .closest('[tuiTheme]')\n            ?.getAttribute('tuiTheme');\n        this.sub = inject(TuiPositionService)\n            .pipe(takeWhile(() => this.directive.el.isConnected && !!this.directive.el.offsetParent), map((v) => (this.directive.position === 'fixed' ? this.vvs.correct(v) : v)), map(([top, left]) => this.getStyles(top, left)), takeUntilDestroyed())\n            .subscribe({\n            next: (styles) => Object.assign(this.el.style, styles),\n            complete: () => this.close?.(),\n        });\n        this.close = () => this.directive.toggle(false);\n    }\n    getStyles(top, left) {\n        const { right } = this.el.getBoundingClientRect();\n        const { maxHeight, minHeight, offset, limitWidth } = this.options;\n        const { innerHeight } = this.win;\n        const clientRect = this.el.offsetParent?.getBoundingClientRect();\n        const { position } = this.directive;\n        const rect = this.accessor.getClientRect();\n        const offsetX = position === 'fixed' ? 0 : -(clientRect?.left || 0);\n        const offsetY = position === 'fixed' ? 0 : -(clientRect?.top || 0);\n        top += offsetY;\n        left += offsetX;\n        const sided = right <= rect.left || left >= rect.right;\n        const isIntersecting = left < rect.right && right > rect.left && top < offsetY + 2 * offset;\n        const available = isIntersecting\n            ? rect.top - 2 * offset\n            : offsetY + innerHeight - top - offset;\n        return {\n            position,\n            top: tuiPx(Math.round(Math.max(top, offsetY + offset))),\n            left: tuiPx(Math.round(left)),\n            maxHeight: sided\n                ? tuiPx(maxHeight)\n                : tuiPx(Math.round(tuiClamp(available, minHeight, maxHeight))),\n            width: limitWidth === 'fixed' ? tuiPx(Math.round(rect.width)) : '',\n            minWidth: limitWidth === 'min' ? tuiPx(Math.round(rect.width)) : '',\n        };\n    }\n    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"16.2.12\", ngImport: i0, type: TuiDropdownComponent, deps: [], target: i0.ɵɵFactoryTarget.Component }); }\n    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"14.0.0\", version: \"16.2.12\", type: TuiDropdownComponent, isStandalone: true, selector: \"tui-dropdown\", host: { properties: { \"@tuiDropdownAnimation\": \"animation\", \"attr.data-appearance\": \"options.appearance\", \"attr.tuiTheme\": \"theme\" } }, providers: [\n            TuiPositionService,\n            tuiPositionAccessorFor('dropdown', TuiDropdownPosition),\n            tuiRectAccessorFor('dropdown', TuiDropdownDirective),\n        ], hostDirectives: [{ directive: i1.TuiActiveZone }], ngImport: i0, template: \"<tui-scrollbar class=\\\"t-scroll\\\">\\n    <div\\n        *polymorpheusOutlet=\\\"directive.content as text; context: {$implicit: close}\\\"\\n        class=\\\"t-primitive\\\"\\n    >\\n        {{ text }}\\n    </div>\\n</tui-scrollbar>\\n\", styles: [\":host{position:absolute;display:flex;box-shadow:var(--tui-shadow-medium);color:var(--tui-text-primary);background:var(--tui-background-elevation-3);border-radius:var(--tui-radius-m);overflow:hidden;border:1px solid var(--tui-border-normal);box-sizing:border-box;max-inline-size:calc(100% - 8px);isolation:isolate;pointer-events:auto}:host.ng-animating{pointer-events:none}:host:not([style*=top]){visibility:hidden}.t-scroll{flex-grow:1;max-inline-size:100%;overscroll-behavior:none}.t-primitive{padding:1rem}\\n\"], dependencies: [{ kind: \"directive\", type: PolymorpheusOutlet, selector: \"[polymorpheusOutlet]\", inputs: [\"polymorpheusOutlet\", \"polymorpheusOutletContext\"] }, { kind: \"component\", type: TuiScrollbar, selector: \"tui-scrollbar\", inputs: [\"hidden\"] }], animations: [tuiDropdownAnimation], changeDetection: i0.ChangeDetectionStrategy.Default }); }\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"16.2.12\", ngImport: i0, type: TuiDropdownComponent, decorators: [{\n            type: Component,\n            args: [{ standalone: true, selector: 'tui-dropdown', imports: [PolymorpheusOutlet, PolymorpheusTemplate, TuiScrollbar], changeDetection: ChangeDetectionStrategy.Default, providers: [\n                        TuiPositionService,\n                        tuiPositionAccessorFor('dropdown', TuiDropdownPosition),\n                        tuiRectAccessorFor('dropdown', TuiDropdownDirective),\n                    ], animations: [tuiDropdownAnimation], hostDirectives: [TuiActiveZone], host: {\n                        '[@tuiDropdownAnimation]': 'animation',\n                        '[attr.data-appearance]': 'options.appearance',\n                        '[attr.tuiTheme]': 'theme',\n                    }, template: \"<tui-scrollbar class=\\\"t-scroll\\\">\\n    <div\\n        *polymorpheusOutlet=\\\"directive.content as text; context: {$implicit: close}\\\"\\n        class=\\\"t-primitive\\\"\\n    >\\n        {{ text }}\\n    </div>\\n</tui-scrollbar>\\n\", styles: [\":host{position:absolute;display:flex;box-shadow:var(--tui-shadow-medium);color:var(--tui-text-primary);background:var(--tui-background-elevation-3);border-radius:var(--tui-radius-m);overflow:hidden;border:1px solid var(--tui-border-normal);box-sizing:border-box;max-inline-size:calc(100% - 8px);isolation:isolate;pointer-events:auto}:host.ng-animating{pointer-events:none}:host:not([style*=top]){visibility:hidden}.t-scroll{flex-grow:1;max-inline-size:100%;overscroll-behavior:none}.t-primitive{padding:1rem}\\n\"] }]\n        }] });\n\nfunction activeZoneFilter(event) {\n    return !event || !this.activeZone.contains(tuiGetActualTarget(event));\n}\nclass TuiDropdownContext extends TuiRectAccessor {\n    constructor() {\n        super(...arguments);\n        this.isTouch = inject(TUI_IS_TOUCH);\n        this.driver = inject(TuiDropdownDriver);\n        this.currentRect = EMPTY_CLIENT_RECT;\n        this.userSelect = computed(() => (this.isTouch() ? 'none' : null));\n        this.activeZone = inject(TuiActiveZone);\n        this.type = 'dropdown';\n    }\n    getClientRect() {\n        return this.currentRect;\n    }\n    closeDropdown(_event) {\n        this.driver.next(false);\n        this.currentRect = EMPTY_CLIENT_RECT;\n    }\n    onContextMenu(x, y) {\n        this.currentRect = tuiPointToClientRect(x, y);\n        this.driver.next(true);\n    }\n    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"16.2.12\", ngImport: i0, type: TuiDropdownContext, deps: null, target: i0.ɵɵFactoryTarget.Directive }); }\n    static { this.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"14.0.0\", version: \"16.2.12\", type: TuiDropdownContext, isStandalone: true, selector: \"[tuiDropdownContext]\", host: { listeners: { \"document:pointerdown.silent\": \"closeDropdown($event)\", \"document:contextmenu.capture.silent\": \"closeDropdown($event)\", \"document:keydown.esc\": \"closeDropdown()\", \"longtap\": \"onContextMenu($event.detail.clientX, $event.detail.clientY)\" }, properties: { \"style.user-select\": \"userSelect()\", \"style.-webkit-user-select\": \"userSelect()\", \"style.-webkit-touch-callout\": \"userSelect()\" } }, providers: [\n            TuiActiveZone,\n            TuiDropdownDriver,\n            tuiAsDriver(TuiDropdownDriver),\n            tuiAsRectAccessor(TuiDropdownContext),\n        ], usesInheritance: true, ngImport: i0 }); }\n}\n__decorate([\n    shouldCall(activeZoneFilter)\n], TuiDropdownContext.prototype, \"closeDropdown\", null);\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"16.2.12\", ngImport: i0, type: TuiDropdownContext, decorators: [{\n            type: Directive,\n            args: [{\n                    standalone: true,\n                    selector: '[tuiDropdownContext]',\n                    providers: [\n                        TuiActiveZone,\n                        TuiDropdownDriver,\n                        tuiAsDriver(TuiDropdownDriver),\n                        tuiAsRectAccessor(TuiDropdownContext),\n                    ],\n                    host: {\n                        '[style.user-select]': 'userSelect()',\n                        '[style.-webkit-user-select]': 'userSelect()',\n                        '[style.-webkit-touch-callout]': 'userSelect()',\n                        '(document:pointerdown.silent)': 'closeDropdown($event)',\n                        '(document:contextmenu.capture.silent)': 'closeDropdown($event)',\n                        '(document:keydown.esc)': 'closeDropdown()',\n                        '(longtap)': 'onContextMenu($event.detail.clientX, $event.detail.clientY)',\n                    },\n                }]\n        }], propDecorators: { closeDropdown: [] } });\n\n/** Default values for hint options */\nconst TUI_DROPDOWN_HOVER_DEFAULT_OPTIONS = {\n    showDelay: 200,\n    hideDelay: 500,\n};\n/**\n * Default parameters for dropdown hover directive\n */\nconst TUI_DROPDOWN_HOVER_OPTIONS = tuiCreateToken(TUI_DROPDOWN_HOVER_DEFAULT_OPTIONS);\nfunction tuiDropdownHoverOptionsProvider(options) {\n    return tuiProvideOptions(TUI_DROPDOWN_HOVER_OPTIONS, options, TUI_DROPDOWN_HOVER_DEFAULT_OPTIONS);\n}\n\nfunction shouldClose(event) {\n    return ('key' in event &&\n        event.key.toLowerCase() === 'escape' &&\n        this.tuiDropdownEnabled &&\n        !!this.tuiDropdownOpen &&\n        !this['dropdown']()?.nextElementSibling);\n}\nclass TuiDropdownOpen {\n    constructor() {\n        this.directive = inject(TuiDropdownDirective);\n        this.el = tuiInjectElement();\n        this.obscured = inject(TuiObscured);\n        this.dropdown = computed(() => this.directive.ref()?.location.nativeElement);\n        this.sub = merge(this.obscured.tuiObscured.pipe(filter(Boolean)), inject(TuiActiveZone).tuiActiveZoneChange.pipe(filter((a) => !a)), fromEvent(this.el, 'focusin').pipe(map(tuiGetActualTarget), filter((target) => !this.host.contains(target) || !this.directive.ref())))\n            .pipe(tuiWatch(), takeUntilDestroyed())\n            .subscribe(() => this.toggle(false));\n        this.tuiDropdownEnabled = true;\n        this.tuiDropdownOpen = false;\n        this.tuiDropdownOpenChange = new EventEmitter();\n        // TODO: make it private when all legacy controls will be deleted from @taiga-ui/legacy (5.0)\n        this.driver = inject(TuiDropdownDriver);\n    }\n    ngOnChanges() {\n        this.update(!!this.tuiDropdownOpen && this.tuiDropdownEnabled);\n    }\n    toggle(open) {\n        if (this.focused && !open) {\n            this.host.focus({ preventScroll: true });\n        }\n        this.update(open);\n    }\n    onEsc(event) {\n        event.preventDefault();\n        this.toggle(false);\n    }\n    onClick(target) {\n        if (!this.editable && this.host.contains(target)) {\n            this.update(!this.tuiDropdownOpen);\n        }\n    }\n    onArrow(event, up) {\n        if (!tuiIsElement(event.target) ||\n            !this.host.contains(event.target) ||\n            !this.tuiDropdownEnabled) {\n            return;\n        }\n        event.preventDefault();\n        this.focusDropdown(up);\n    }\n    onKeydown({ key, target, defaultPrevented }) {\n        if (defaultPrevented ||\n            !tuiIsEditingKey(key) ||\n            !this.editable ||\n            !this.focused ||\n            !this.directive.content ||\n            !tuiIsHTMLElement(target) ||\n            (tuiIsElementEditable(target) && target !== this.host)) {\n            return;\n        }\n        this.update(true);\n        this.host.focus({ preventScroll: true });\n    }\n    get host() {\n        const initial = this.dropdownHost?.nativeElement || this.el;\n        const focusable = tuiIsNativeKeyboardFocusable(initial)\n            ? initial\n            : tuiGetClosestFocusable({ initial, root: this.el });\n        return this.dropdownHost?.nativeElement || focusable || this.el;\n    }\n    get editable() {\n        return tuiIsElementEditable(this.host);\n    }\n    get focused() {\n        return tuiIsNativeFocusedIn(this.host) || tuiIsNativeFocusedIn(this.dropdown());\n    }\n    update(open) {\n        if (open && !this.tuiDropdownEnabled) {\n            return;\n        }\n        this.tuiDropdownOpen = open;\n        this.tuiDropdownOpenChange.emit(open);\n        this.drive();\n    }\n    drive(open = !!this.tuiDropdownOpen && this.tuiDropdownEnabled) {\n        this.obscured.tuiObscuredEnabled = open;\n        this.driver.next(open);\n    }\n    focusDropdown(previous) {\n        const root = this.dropdown();\n        if (!root) {\n            this.update(true);\n            return;\n        }\n        const doc = this.el.ownerDocument;\n        const child = root.appendChild(doc.createElement('div'));\n        const initial = previous ? child : root;\n        const focusable = tuiGetClosestFocusable({ initial, previous, root });\n        child.remove();\n        focusable?.focus();\n    }\n    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"16.2.12\", ngImport: i0, type: TuiDropdownOpen, deps: [], target: i0.ɵɵFactoryTarget.Directive }); }\n    static { this.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"14.0.0\", version: \"16.2.12\", type: TuiDropdownOpen, isStandalone: true, selector: \"[tuiDropdown][tuiDropdownOpen],[tuiDropdown][tuiDropdownOpenChange]\", inputs: { tuiDropdownEnabled: \"tuiDropdownEnabled\", tuiDropdownOpen: \"tuiDropdownOpen\" }, outputs: { tuiDropdownOpenChange: \"tuiDropdownOpenChange\" }, host: { listeners: { \"click\": \"onClick($event.target)\", \"keydown.arrowDown\": \"onArrow($event, false)\", \"keydown.arrowUp\": \"onArrow($event, true)\", \"document:keydown.silent.capture\": \"onEsc($event)\", \"document:keydown.silent\": \"onKeydown($event)\" } }, providers: [TuiDropdownDriver, tuiAsDriver(TuiDropdownDriver)], queries: [{ propertyName: \"dropdownHost\", first: true, predicate: [\"tuiDropdownHost\"], descendants: true, read: ElementRef }], usesOnChanges: true, hostDirectives: [{ directive: i1$1.TuiObscured }, { directive: i1.TuiActiveZone, inputs: [\"tuiActiveZoneParent\", \"tuiActiveZoneParent\"], outputs: [\"tuiActiveZoneChange\", \"tuiActiveZoneChange\"] }], ngImport: i0 }); }\n}\n__decorate([\n    shouldCall(shouldClose)\n], TuiDropdownOpen.prototype, \"onEsc\", null);\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"16.2.12\", ngImport: i0, type: TuiDropdownOpen, decorators: [{\n            type: Directive,\n            args: [{\n                    standalone: true,\n                    selector: '[tuiDropdown][tuiDropdownOpen],[tuiDropdown][tuiDropdownOpenChange]',\n                    providers: [TuiDropdownDriver, tuiAsDriver(TuiDropdownDriver)],\n                    hostDirectives: [\n                        TuiObscured,\n                        {\n                            directive: TuiActiveZone,\n                            inputs: ['tuiActiveZoneParent'],\n                            outputs: ['tuiActiveZoneChange'],\n                        },\n                    ],\n                    host: {\n                        '(click)': 'onClick($event.target)',\n                        '(keydown.arrowDown)': 'onArrow($event, false)',\n                        '(keydown.arrowUp)': 'onArrow($event, true)',\n                        '(document:keydown.silent.capture)': 'onEsc($event)',\n                        '(document:keydown.silent)': 'onKeydown($event)',\n                    },\n                }]\n        }], propDecorators: { dropdownHost: [{\n                type: ContentChild,\n                args: ['tuiDropdownHost', { descendants: true, read: ElementRef }]\n            }], tuiDropdownEnabled: [{\n                type: Input\n            }], tuiDropdownOpen: [{\n                type: Input\n            }], tuiDropdownOpenChange: [{\n                type: Output\n            }], onEsc: [] } });\n\nclass TuiDropdownHover extends TuiDriver {\n    constructor() {\n        super((subscriber) => this.stream$.subscribe(subscriber));\n        this.el = tuiInjectElement();\n        this.doc = inject(DOCUMENT);\n        this.options = inject(TUI_DROPDOWN_HOVER_OPTIONS);\n        this.activeZone = inject(TuiActiveZone);\n        this.open = inject(TuiDropdownOpen, { optional: true });\n        this.stream$ = merge(tuiTypedFromEvent(this.doc, 'mouseover').pipe(map(tuiGetActualTarget)), tuiTypedFromEvent(this.doc, 'mouseout').pipe(map((e) => e.relatedTarget))).pipe(map((element) => tuiIsElement(element) && this.isHovered(element)), distinctUntilChanged(), switchMap((v) => of(v).pipe(delay(v ? this.showDelay : this.hideDelay))), tuiZoneOptimized(), tap((hovered) => {\n            this.hovered = hovered;\n            this.open?.toggle(hovered);\n        }), share());\n        this.showDelay = this.options.showDelay;\n        this.hideDelay = this.options.hideDelay;\n        this.hovered = false;\n        this.type = 'dropdown';\n    }\n    onClick(event) {\n        if (this.hovered && this.open) {\n            event.preventDefault();\n        }\n    }\n    isHovered(element) {\n        const host = this.dropdownHost?.nativeElement || this.el;\n        const hovered = host.contains(element);\n        const child = !this.el.contains(element) && this.activeZone.contains(element);\n        return hovered || child;\n    }\n    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"16.2.12\", ngImport: i0, type: TuiDropdownHover, deps: [], target: i0.ɵɵFactoryTarget.Directive }); }\n    static { this.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"14.0.0\", version: \"16.2.12\", type: TuiDropdownHover, isStandalone: true, selector: \"[tuiDropdownHover]\", inputs: { showDelay: [\"tuiDropdownShowDelay\", \"showDelay\"], hideDelay: [\"tuiDropdownHideDelay\", \"hideDelay\"] }, host: { listeners: { \"click.capture\": \"onClick($event)\" } }, providers: [TuiActiveZone, tuiAsDriver(TuiDropdownHover)], queries: [{ propertyName: \"dropdownHost\", first: true, predicate: [\"tuiDropdownHost\"], descendants: true, read: ElementRef }], usesInheritance: true, ngImport: i0 }); }\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"16.2.12\", ngImport: i0, type: TuiDropdownHover, decorators: [{\n            type: Directive,\n            args: [{\n                    standalone: true,\n                    selector: '[tuiDropdownHover]',\n                    providers: [TuiActiveZone, tuiAsDriver(TuiDropdownHover)],\n                    host: {\n                        '(click.capture)': 'onClick($event)',\n                    },\n                }]\n        }], ctorParameters: function () { return []; }, propDecorators: { dropdownHost: [{\n                type: ContentChild,\n                args: ['tuiDropdownHost', { descendants: true, read: ElementRef }]\n            }], showDelay: [{\n                type: Input,\n                args: ['tuiDropdownShowDelay']\n            }], hideDelay: [{\n                type: Input,\n                args: ['tuiDropdownHideDelay']\n            }] } });\n\nclass TuiDropdownManual {\n    constructor() {\n        this.driver = inject(TuiDropdownDriver);\n        this.tuiDropdownManual = false;\n    }\n    ngOnChanges() {\n        this.driver.next(!!this.tuiDropdownManual);\n    }\n    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"16.2.12\", ngImport: i0, type: TuiDropdownManual, deps: [], target: i0.ɵɵFactoryTarget.Directive }); }\n    static { this.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"14.0.0\", version: \"16.2.12\", type: TuiDropdownManual, isStandalone: true, selector: \"[tuiDropdownManual]\", inputs: { tuiDropdownManual: \"tuiDropdownManual\" }, providers: [TuiDropdownDriver, tuiAsDriver(TuiDropdownDriver)], usesOnChanges: true, ngImport: i0 }); }\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"16.2.12\", ngImport: i0, type: TuiDropdownManual, decorators: [{\n            type: Directive,\n            args: [{\n                    standalone: true,\n                    selector: '[tuiDropdownManual]',\n                    providers: [TuiDropdownDriver, tuiAsDriver(TuiDropdownDriver)],\n                }]\n        }], propDecorators: { tuiDropdownManual: [{\n                type: Input\n            }] } });\n\n/**\n * @deprecated TODO: remove in v.5 when legacy controls are dropped\n */\nclass TuiDropdownOpenLegacy {\n    constructor() {\n        this.tuiDropdownOpenChange = new BehaviorSubject(false);\n    }\n    set tuiDropdownOpen(open) {\n        this.tuiDropdownOpenChange.next(open);\n    }\n    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"16.2.12\", ngImport: i0, type: TuiDropdownOpenLegacy, deps: [], target: i0.ɵɵFactoryTarget.Directive }); }\n    static { this.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"14.0.0\", version: \"16.2.12\", type: TuiDropdownOpenLegacy, isStandalone: true, selector: \"[tuiDropdownOpen]:not([tuiDropdown]),[tuiDropdownOpenChange]:not([tuiDropdown])\", inputs: { tuiDropdownOpen: \"tuiDropdownOpen\" }, outputs: { tuiDropdownOpenChange: \"tuiDropdownOpenChange\" }, ngImport: i0 }); }\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"16.2.12\", ngImport: i0, type: TuiDropdownOpenLegacy, decorators: [{\n            type: Directive,\n            args: [{\n                    standalone: true,\n                    selector: '[tuiDropdownOpen]:not([tuiDropdown]),[tuiDropdownOpenChange]:not([tuiDropdown])',\n                }]\n        }], propDecorators: { tuiDropdownOpenChange: [{\n                type: Output\n            }], tuiDropdownOpen: [{\n                type: Input\n            }] } });\n\nclass TuiDropdownPortal {\n    constructor() {\n        this.template = inject(TemplateRef);\n        this.service = inject(TuiDropdownService);\n    }\n    set tuiDropdown(show) {\n        this.viewRef?.destroy();\n        if (show) {\n            this.viewRef = this.service.addTemplate(this.template);\n        }\n    }\n    ngOnDestroy() {\n        this.viewRef?.destroy();\n    }\n    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"16.2.12\", ngImport: i0, type: TuiDropdownPortal, deps: [], target: i0.ɵɵFactoryTarget.Directive }); }\n    static { this.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"14.0.0\", version: \"16.2.12\", type: TuiDropdownPortal, isStandalone: true, selector: \"ng-template[tuiDropdown]\", inputs: { tuiDropdown: \"tuiDropdown\" }, ngImport: i0 }); }\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"16.2.12\", ngImport: i0, type: TuiDropdownPortal, decorators: [{\n            type: Directive,\n            args: [{\n                    standalone: true,\n                    selector: 'ng-template[tuiDropdown]',\n                }]\n        }], propDecorators: { tuiDropdown: [{\n                type: Input\n            }] } });\n\nclass TuiDropdownPositionSided extends TuiPositionAccessor {\n    constructor() {\n        super(...arguments);\n        this.options = inject(TUI_DROPDOWN_OPTIONS);\n        this.viewport = inject(TUI_VIEWPORT);\n        this.vertical = inject(TuiDropdownPosition);\n        this.previous = this.options.direction || 'bottom';\n        this.tuiDropdownSided = '';\n        this.tuiDropdownSidedOffset = 4;\n        this.type = 'dropdown';\n    }\n    getPosition(rect) {\n        if (this.tuiDropdownSided === false) {\n            return this.vertical.getPosition(rect);\n        }\n        const { height, width } = rect;\n        const hostRect = this.vertical.accessor?.getClientRect() ?? EMPTY_CLIENT_RECT;\n        const viewport = this.viewport.getClientRect();\n        const { direction, minHeight, offset } = this.options;\n        const align = this.options.align === 'center' ? 'left' : this.options.align;\n        const available = {\n            top: hostRect.bottom - viewport.top,\n            left: hostRect.left - offset - viewport.left,\n            right: viewport.right - hostRect.right - offset,\n            bottom: viewport.bottom - hostRect.top,\n        };\n        const position = {\n            top: hostRect.bottom - height + this.tuiDropdownSidedOffset + 1,\n            left: hostRect.left - width - offset,\n            right: hostRect.right + offset,\n            bottom: hostRect.top - this.tuiDropdownSidedOffset - 1, // 1 for border\n        };\n        const better = available.top > available.bottom ? 'top' : 'bottom';\n        const maxLeft = available.left > available.right ? position.left : position.right;\n        const left = available[align] > width ? position[align] : maxLeft;\n        if ((available[this.previous] > minHeight && direction) ||\n            this.previous === better) {\n            return [position[this.previous], left];\n        }\n        this.previous = better;\n        return [position[better], left];\n    }\n    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"16.2.12\", ngImport: i0, type: TuiDropdownPositionSided, deps: null, target: i0.ɵɵFactoryTarget.Directive }); }\n    static { this.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"14.0.0\", version: \"16.2.12\", type: TuiDropdownPositionSided, isStandalone: true, selector: \"[tuiDropdownSided]\", inputs: { tuiDropdownSided: \"tuiDropdownSided\", tuiDropdownSidedOffset: \"tuiDropdownSidedOffset\" }, providers: [TuiDropdownPosition, tuiAsPositionAccessor(TuiDropdownPositionSided)], usesInheritance: true, ngImport: i0 }); }\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"16.2.12\", ngImport: i0, type: TuiDropdownPositionSided, decorators: [{\n            type: Directive,\n            args: [{\n                    standalone: true,\n                    selector: '[tuiDropdownSided]',\n                    providers: [TuiDropdownPosition, tuiAsPositionAccessor(TuiDropdownPositionSided)],\n                }]\n        }], propDecorators: { tuiDropdownSided: [{\n                type: Input\n            }], tuiDropdownSidedOffset: [{\n                type: Input\n            }] } });\n\nclass TuiDropdownSelection extends TuiDriver {\n    constructor() {\n        super((subscriber) => this.stream$.subscribe(subscriber));\n        this.doc = inject(DOCUMENT);\n        this.vcr = inject(ViewContainerRef);\n        this.dropdown = inject(TuiDropdownDirective);\n        this.el = tuiInjectElement();\n        this.handler$ = new BehaviorSubject(TUI_TRUE_HANDLER);\n        this.stream$ = combineLatest([\n            this.handler$,\n            inject(TUI_SELECTION_STREAM).pipe(map(() => this.getRange()), distinctUntilChanged((x, y) => x.startOffset === y.startOffset &&\n                x.endOffset === y.endOffset &&\n                x.commonAncestorContainer === y.commonAncestorContainer)),\n        ]).pipe(map(([handler, range]) => {\n            const contained = this.el.contains(range.commonAncestorContainer);\n            this.range =\n                contained && tuiIsTextNode(range.commonAncestorContainer)\n                    ? range\n                    : this.range;\n            return (contained && handler(this.range)) || this.inDropdown(range);\n        }));\n        this.range = inject(TUI_RANGE);\n        this.position = 'selection';\n        this.type = 'dropdown';\n    }\n    set tuiDropdownSelection(visible) {\n        if (!tuiIsString(visible)) {\n            this.handler$.next(visible);\n        }\n    }\n    getClientRect() {\n        switch (this.position) {\n            case 'tag': {\n                const { commonAncestorContainer } = this.range;\n                const element = tuiIsElement(commonAncestorContainer)\n                    ? commonAncestorContainer\n                    : commonAncestorContainer.parentNode;\n                return element && tuiIsElement(element)\n                    ? element.getBoundingClientRect()\n                    : EMPTY_CLIENT_RECT;\n            }\n            case 'word':\n                return tuiGetWordRange(this.range).getBoundingClientRect();\n            default:\n                return this.range.getBoundingClientRect();\n        }\n    }\n    ngOnDestroy() {\n        if (this.ghost) {\n            this.vcr.element.nativeElement.removeChild(this.ghost);\n        }\n    }\n    getRange() {\n        const active = tuiGetNativeFocused(this.doc);\n        const selection = this.doc.getSelection();\n        const range = active && tuiIsTextfield(active) && this.el.contains(active)\n            ? this.veryVerySadInputFix(active)\n            : (selection?.rangeCount && selection.getRangeAt(0)) || this.range;\n        return range.cloneRange();\n    }\n    /**\n     * Check if given range is at least partially inside dropdown\n     */\n    inDropdown(range) {\n        const { startContainer, endContainer } = range;\n        const inDropdown = this.boxContains(range.commonAncestorContainer);\n        const hostToDropdown = this.boxContains(endContainer) && this.el.contains(startContainer);\n        const dropdownToHost = this.boxContains(startContainer) && this.el.contains(endContainer);\n        return inDropdown || hostToDropdown || dropdownToHost;\n    }\n    /**\n     * Check if Node is inside dropdown\n     */\n    boxContains(node) {\n        return !!this.dropdown.ref()?.location.nativeElement.contains(node);\n    }\n    veryVerySadInputFix(element) {\n        const { ghost = this.initGhost(element) } = this;\n        const { top, left, width, height } = element.getBoundingClientRect();\n        const { selectionStart, selectionEnd, value } = element;\n        const range = this.doc.createRange();\n        const hostRect = this.el.getBoundingClientRect();\n        ghost.style.top = tuiPx(top - hostRect.top);\n        ghost.style.left = tuiPx(left - hostRect.left);\n        ghost.style.width = tuiPx(width);\n        ghost.style.height = tuiPx(height);\n        ghost.textContent = CHAR_ZERO_WIDTH_SPACE + value + CHAR_NO_BREAK_SPACE;\n        range.setStart(ghost.firstChild, selectionStart || 0);\n        range.setEnd(ghost.firstChild, selectionEnd || 0);\n        return range;\n    }\n    /**\n     * Create an invisible DIV styled exactly like input/textarea element inside directive\n     */\n    initGhost(element) {\n        const ghost = this.doc.createElement('div');\n        const { font, letterSpacing, textTransform, padding } = getComputedStyle(element);\n        ghost.style.position = 'absolute';\n        ghost.style.pointerEvents = 'none';\n        ghost.style.opacity = '0';\n        ghost.style.whiteSpace = 'pre-wrap';\n        ghost.style.font = font;\n        ghost.style.letterSpacing = letterSpacing;\n        ghost.style.textTransform = textTransform;\n        ghost.style.padding = padding;\n        this.vcr.element.nativeElement.appendChild(ghost);\n        this.ghost = ghost;\n        return ghost;\n    }\n    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"16.2.12\", ngImport: i0, type: TuiDropdownSelection, deps: [], target: i0.ɵɵFactoryTarget.Directive }); }\n    static { this.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"14.0.0\", version: \"16.2.12\", type: TuiDropdownSelection, isStandalone: true, selector: \"[tuiDropdownSelection]\", inputs: { position: [\"tuiDropdownSelectionPosition\", \"position\"], tuiDropdownSelection: \"tuiDropdownSelection\" }, providers: [\n            tuiAsDriver(TuiDropdownSelection),\n            tuiAsRectAccessor(TuiDropdownSelection),\n        ], usesInheritance: true, ngImport: i0 }); }\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"16.2.12\", ngImport: i0, type: TuiDropdownSelection, decorators: [{\n            type: Directive,\n            args: [{\n                    standalone: true,\n                    selector: '[tuiDropdownSelection]',\n                    providers: [\n                        tuiAsDriver(TuiDropdownSelection),\n                        tuiAsRectAccessor(TuiDropdownSelection),\n                    ],\n                }]\n        }], ctorParameters: function () { return []; }, propDecorators: { position: [{\n                type: Input,\n                args: ['tuiDropdownSelectionPosition']\n            }], tuiDropdownSelection: [{\n                type: Input\n            }] } });\n\nconst TuiDropdown = [\n    TuiDropdownOptionsDirective,\n    TuiDropdownDriverDirective,\n    TuiDropdownDirective,\n    TuiDropdownComponent,\n    TuiDropdownOpen,\n    TuiDropdownOpenLegacy,\n    TuiDropdownPortal,\n    TuiDropdownManual,\n    TuiDropdownHover,\n    TuiDropdownContext,\n    TuiDropdownPosition,\n    TuiDropdownPositionSided,\n    TuiDropdownSelection,\n];\n\nfunction tuiDropdown(value) {\n    return tuiDirectiveBinding(TuiDropdownDirective, 'tuiDropdown', value, {});\n}\nfunction tuiDropdownOpen() {\n    const open = tuiDirectiveBinding(TuiDropdownOpen, 'tuiDropdownOpen', false, {});\n    inject(TuiDropdownOpen)\n        .tuiDropdownOpenChange.pipe(takeUntilDestroyed())\n        .subscribe((value) => open.set(value));\n    return open;\n}\n\nclass TuiDropdownFixed {\n    constructor() {\n        const override = tuiOverrideOptions$1({ limitWidth: 'fixed' }, TUI_DROPDOWN_DEFAULT_OPTIONS);\n        override(inject(TUI_DROPDOWN_OPTIONS, { self: true, optional: true }), null);\n    }\n    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"16.2.12\", ngImport: i0, type: TuiDropdownFixed, deps: [], target: i0.ɵɵFactoryTarget.Directive }); }\n    static { this.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"14.0.0\", version: \"16.2.12\", type: TuiDropdownFixed, isStandalone: true, providers: [tuiDropdownOptionsProvider({})], ngImport: i0 }); }\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"16.2.12\", ngImport: i0, type: TuiDropdownFixed, decorators: [{\n            type: Directive,\n            args: [{\n                    standalone: true,\n                    providers: [tuiDropdownOptionsProvider({})],\n                }]\n        }], ctorParameters: function () { return []; } });\n\n/**\n * Host element for dynamically created portals, for example using {@link TuiDropdownDirective}.\n */\nclass TuiDropdowns extends TuiPortals {\n    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"16.2.12\", ngImport: i0, type: TuiDropdowns, deps: null, target: i0.ɵɵFactoryTarget.Component }); }\n    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"14.0.0\", version: \"16.2.12\", type: TuiDropdowns, isStandalone: true, selector: \"tui-dropdowns\", providers: [tuiAsPortal(TuiDropdownService)], usesInheritance: true, ngImport: i0, template: `\n        <ng-content></ng-content>\n        <ng-container #viewContainer></ng-container>\n    `, isInline: true, styles: [\":host{display:block;height:100%;isolation:isolate}\\n\"], changeDetection: i0.ChangeDetectionStrategy.OnPush }); }\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"16.2.12\", ngImport: i0, type: TuiDropdowns, decorators: [{\n            type: Component,\n            args: [{ standalone: true, selector: 'tui-dropdowns', template: `\n        <ng-content></ng-content>\n        <ng-container #viewContainer></ng-container>\n    `, changeDetection: ChangeDetectionStrategy.OnPush, providers: [tuiAsPortal(TuiDropdownService)], styles: [\":host{display:block;height:100%;isolation:isolate}\\n\"] }]\n        }] });\n\nclass TuiWithDropdownOpen {\n    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"16.2.12\", ngImport: i0, type: TuiWithDropdownOpen, deps: [], target: i0.ɵɵFactoryTarget.Directive }); }\n    static { this.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"14.0.0\", version: \"16.2.12\", type: TuiWithDropdownOpen, isStandalone: true, hostDirectives: [{ directive: TuiDropdownOpen, inputs: [\"tuiDropdownOpen\", \"open\"], outputs: [\"tuiDropdownOpenChange\", \"openChange\"] }], ngImport: i0 }); }\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"16.2.12\", ngImport: i0, type: TuiWithDropdownOpen, decorators: [{\n            type: Directive,\n            args: [{\n                    standalone: true,\n                    hostDirectives: [\n                        {\n                            directive: TuiDropdownOpen,\n                            inputs: ['tuiDropdownOpen: open'],\n                            outputs: ['tuiDropdownOpenChange: openChange'],\n                        },\n                    ],\n                }]\n        }] });\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { TUI_DROPDOWN_COMPONENT, TUI_DROPDOWN_CONTEXT, TUI_DROPDOWN_DEFAULT_OPTIONS, TUI_DROPDOWN_HOVER_DEFAULT_OPTIONS, TUI_DROPDOWN_HOVER_OPTIONS, TUI_DROPDOWN_OPTIONS, TuiDropdown, TuiDropdownComponent, TuiDropdownContext, TuiDropdownDirective, TuiDropdownDriver, TuiDropdownDriverDirective, TuiDropdownFixed, TuiDropdownHover, TuiDropdownManual, TuiDropdownOpen, TuiDropdownOpenLegacy, TuiDropdownOptionsDirective, TuiDropdownPortal, TuiDropdownPosition, TuiDropdownPositionSided, TuiDropdownSelection, TuiDropdownService, TuiDropdowns, TuiWithDropdownOpen, tuiDropdown, tuiDropdownHoverOptionsProvider, tuiDropdownOpen, tuiDropdownOptionsProvider };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}