import { Optional, Self } from '@angular/core';
import { NgControl } from '@angular/forms';
import { tuiControlValue } from '@taiga-ui/cdk/observables';
import { tuiCreateToken } from '@taiga-ui/cdk/utils/miscellaneous';
import { map, of } from 'rxjs';
/**
 * Stream that emits calendar data change
 */
export const TUI_CALENDAR_DATE_STREAM = tuiCreateToken();
export function tuiDateStreamWithTransformer(transformer) {
    return {
        provide: TUI_CALENDAR_DATE_STREAM,
        deps: [
            [new Optional(), new Self(), NgControl],
            [new Optional(), transformer],
        ],
        useFactory: tuiControlValueFactory,
    };
}
function tuiControlValueFactory(control, transformer) {
    return control
        ? tuiControlValue(control).pipe(map((value) => transformer ? transformer?.fromControlValue(value) : value))
        : of(null);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2FsZW5kYXItZGF0ZS1zdHJlYW0uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9wcm9qZWN0cy9raXQvdG9rZW5zL2NhbGVuZGFyLWRhdGUtc3RyZWFtLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLE9BQU8sRUFBQyxRQUFRLEVBQUUsSUFBSSxFQUFDLE1BQU0sZUFBZSxDQUFDO0FBQzdDLE9BQU8sRUFBQyxTQUFTLEVBQUMsTUFBTSxnQkFBZ0IsQ0FBQztBQUd6QyxPQUFPLEVBQUMsZUFBZSxFQUFDLE1BQU0sMkJBQTJCLENBQUM7QUFDMUQsT0FBTyxFQUFDLGNBQWMsRUFBQyxNQUFNLG1DQUFtQyxDQUFDO0FBRWpFLE9BQU8sRUFBQyxHQUFHLEVBQUUsRUFBRSxFQUFDLE1BQU0sTUFBTSxDQUFDO0FBRTdCOztHQUVHO0FBQ0gsTUFBTSxDQUFDLE1BQU0sd0JBQXdCLEdBQ2pDLGNBQWMsRUFBMkMsQ0FBQztBQUU5RCxNQUFNLFVBQVUsNEJBQTRCLENBQ3hDLFdBQXFEO0lBRXJELE9BQU87UUFDSCxPQUFPLEVBQUUsd0JBQXdCO1FBQ2pDLElBQUksRUFBRTtZQUNGLENBQUMsSUFBSSxRQUFRLEVBQUUsRUFBRSxJQUFJLElBQUksRUFBRSxFQUFFLFNBQVMsQ0FBQztZQUN2QyxDQUFDLElBQUksUUFBUSxFQUFFLEVBQUUsV0FBVyxDQUFDO1NBQ2hDO1FBQ0QsVUFBVSxFQUFFLHNCQUFzQjtLQUNyQyxDQUFDO0FBQ04sQ0FBQztBQUVELFNBQVMsc0JBQXNCLENBRzNCLE9BQXlCLEVBQ3pCLFdBQTJDO0lBRTNDLE9BQU8sT0FBTztRQUNWLENBQUMsQ0FBQyxlQUFlLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUN6QixHQUFHLENBQUMsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUNWLFdBQVcsQ0FBQyxDQUFDLENBQUMsV0FBVyxFQUFFLGdCQUFnQixDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBRSxLQUFXLENBQ3BFLENBQ0o7UUFDSCxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ25CLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7SW5qZWN0aW9uVG9rZW4sIFByb3ZpZGVyfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7T3B0aW9uYWwsIFNlbGZ9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtOZ0NvbnRyb2x9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcbmltcG9ydCB0eXBlIHtUdWlWYWx1ZVRyYW5zZm9ybWVyfSBmcm9tICdAdGFpZ2EtdWkvY2RrL2NsYXNzZXMnO1xuaW1wb3J0IHR5cGUge1R1aURheSwgVHVpRGF5UmFuZ2UsIFR1aVRpbWV9IGZyb20gJ0B0YWlnYS11aS9jZGsvZGF0ZS10aW1lJztcbmltcG9ydCB7dHVpQ29udHJvbFZhbHVlfSBmcm9tICdAdGFpZ2EtdWkvY2RrL29ic2VydmFibGVzJztcbmltcG9ydCB7dHVpQ3JlYXRlVG9rZW59IGZyb20gJ0B0YWlnYS11aS9jZGsvdXRpbHMvbWlzY2VsbGFuZW91cyc7XG5pbXBvcnQgdHlwZSB7T2JzZXJ2YWJsZX0gZnJvbSAncnhqcyc7XG5pbXBvcnQge21hcCwgb2Z9IGZyb20gJ3J4anMnO1xuXG4vKipcbiAqIFN0cmVhbSB0aGF0IGVtaXRzIGNhbGVuZGFyIGRhdGEgY2hhbmdlXG4gKi9cbmV4cG9ydCBjb25zdCBUVUlfQ0FMRU5EQVJfREFURV9TVFJFQU0gPVxuICAgIHR1aUNyZWF0ZVRva2VuPE9ic2VydmFibGU8VHVpRGF5IHwgVHVpRGF5UmFuZ2UgfCBudWxsPj4oKTtcblxuZXhwb3J0IGZ1bmN0aW9uIHR1aURhdGVTdHJlYW1XaXRoVHJhbnNmb3JtZXIoXG4gICAgdHJhbnNmb3JtZXI6IEluamVjdGlvblRva2VuPFR1aVZhbHVlVHJhbnNmb3JtZXI8YW55Pj4sXG4pOiBQcm92aWRlciB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcHJvdmlkZTogVFVJX0NBTEVOREFSX0RBVEVfU1RSRUFNLFxuICAgICAgICBkZXBzOiBbXG4gICAgICAgICAgICBbbmV3IE9wdGlvbmFsKCksIG5ldyBTZWxmKCksIE5nQ29udHJvbF0sXG4gICAgICAgICAgICBbbmV3IE9wdGlvbmFsKCksIHRyYW5zZm9ybWVyXSxcbiAgICAgICAgXSxcbiAgICAgICAgdXNlRmFjdG9yeTogdHVpQ29udHJvbFZhbHVlRmFjdG9yeSxcbiAgICB9O1xufVxuXG5mdW5jdGlvbiB0dWlDb250cm9sVmFsdWVGYWN0b3J5PFxuICAgIFQgZXh0ZW5kcyBUdWlEYXkgfCBUdWlEYXlSYW5nZSB8IFtUdWlEYXkgfCBudWxsLCBUdWlUaW1lIHwgbnVsbF0sXG4+KFxuICAgIGNvbnRyb2w6IE5nQ29udHJvbCB8IG51bGwsXG4gICAgdHJhbnNmb3JtZXI/OiBUdWlWYWx1ZVRyYW5zZm9ybWVyPFQ+IHwgbnVsbCxcbik6IE9ic2VydmFibGU8VCB8IG51bGw+IHwgbnVsbCB7XG4gICAgcmV0dXJuIGNvbnRyb2xcbiAgICAgICAgPyB0dWlDb250cm9sVmFsdWUoY29udHJvbCkucGlwZShcbiAgICAgICAgICAgICAgbWFwKCh2YWx1ZSkgPT5cbiAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybWVyID8gdHJhbnNmb3JtZXI/LmZyb21Db250cm9sVmFsdWUodmFsdWUpIDogKHZhbHVlIGFzIFQpLFxuICAgICAgICAgICAgICApLFxuICAgICAgICAgIClcbiAgICAgICAgOiBvZihudWxsKTtcbn1cbiJdfQ==